<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2019 | RJW&#39;s Notebook</title>
    <meta name="generator" content="VuePress 1.5.3">
    <link rel="icon" href="/Notebook/images/logo.png">
    <meta name="description" content="📝每天记录一点点">
    <link rel="preload" href="/Notebook/assets/css/0.styles.2568425a.css" as="style"><link rel="preload" href="/Notebook/assets/js/app.51035dcd.js" as="script"><link rel="preload" href="/Notebook/assets/js/21.b8066a1d.js" as="script"><link rel="preload" href="/Notebook/assets/js/6.f1072f55.js" as="script"><link rel="preload" href="/Notebook/assets/js/19.17673ac2.js" as="script"><link rel="prefetch" href="/Notebook/assets/js/2.f187326d.js"><link rel="prefetch" href="/Notebook/assets/js/3.c107e9cc.js"><link rel="prefetch" href="/Notebook/assets/js/4.195f4b4c.js"><link rel="prefetch" href="/Notebook/assets/js/5.c6e81d81.js"><link rel="prefetch" href="/Notebook/assets/js/7.d4af47ef.js"><link rel="prefetch" href="/Notebook/assets/js/8.c5c9a92a.js"><link rel="prefetch" href="/Notebook/assets/js/9.6d199ed1.js"><link rel="prefetch" href="/Notebook/assets/js/10.88896875.js"><link rel="prefetch" href="/Notebook/assets/js/11.bcd53a24.js"><link rel="prefetch" href="/Notebook/assets/js/12.1b5a4e8c.js"><link rel="prefetch" href="/Notebook/assets/js/13.356cc3d0.js"><link rel="prefetch" href="/Notebook/assets/js/14.2c74c350.js"><link rel="prefetch" href="/Notebook/assets/js/15.b864e6b5.js"><link rel="prefetch" href="/Notebook/assets/js/16.30e2be76.js"><link rel="prefetch" href="/Notebook/assets/js/17.beaf0e2c.js"><link rel="prefetch" href="/Notebook/assets/js/18.13b949a3.js"><link rel="prefetch" href="/Notebook/assets/js/20.5e336d91.js">
    <link rel="stylesheet" href="/Notebook/assets/css/0.styles.2568425a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Notebook/" class="home-link router-link-active"><!----> <span class="site-name">RJW's Notebook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Notebook/dailyRecord/" class="nav-link router-link-active">
  📝日常记录
</a></div><div class="nav-item"><a href="/Notebook/bookmark/" class="nav-link">
  🏷书签整理
</a></div><div class="nav-item"><a href="/Notebook/lint/" class="nav-link">
  ✔️编码规范&amp;协同开发
</a></div><div class="nav-item"><a href="http://shooterblog.site/Learn-JS-Demo/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📖知识脑图
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://shooterblog.site" target="_blank" rel="noopener noreferrer" class="nav-link external">
  🔧个人博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/shooterRao" target="_blank" rel="noopener noreferrer" class="nav-link external">
  🔗Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Notebook/dailyRecord/" class="nav-link router-link-active">
  📝日常记录
</a></div><div class="nav-item"><a href="/Notebook/bookmark/" class="nav-link">
  🏷书签整理
</a></div><div class="nav-item"><a href="/Notebook/lint/" class="nav-link">
  ✔️编码规范&amp;协同开发
</a></div><div class="nav-item"><a href="http://shooterblog.site/Learn-JS-Demo/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📖知识脑图
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://shooterblog.site" target="_blank" rel="noopener noreferrer" class="nav-link external">
  🔧个人博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/shooterRao" target="_blank" rel="noopener noreferrer" class="nav-link external">
  🔗Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>日常记录</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Notebook/dailyRecord/" aria-current="page" class="sidebar-link">2022</a></li><li><a href="/Notebook/dailyRecord/2021.html" class="sidebar-link">2021</a></li><li><a href="/Notebook/dailyRecord/2020.html" class="sidebar-link">2020</a></li><li><a href="/Notebook/dailyRecord/2019.html" aria-current="page" class="active sidebar-link">2019</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#一月" class="sidebar-link">一月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#利用-coverage-检测可以懒加载的-modules" class="sidebar-link">利用 Coverage 检测可以懒加载的 modules</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#nginx-vue-history-爬坑" class="sidebar-link">nginx vue history 爬坑</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#iview-menu-组件无法高亮展开问题" class="sidebar-link">iview menu 组件无法高亮展开问题</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#滚动进度条核心代码" class="sidebar-link">滚动进度条核心代码</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#二月" class="sidebar-link">二月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vue-jsx-使用全局组件" class="sidebar-link">vue jsx 使用全局组件</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#tomcat-开启-gzip-配置" class="sidebar-link">tomcat 开启 gzip 配置</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vuecli3-开启-gzip-配置" class="sidebar-link">vuecli3 开启 gzip 配置</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#三月" class="sidebar-link">三月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vue-v-model-细节" class="sidebar-link">vue v-model 细节</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#js-找出数组最大最小值" class="sidebar-link">js 找出数组最大最小值</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vue-强迫重新渲染" class="sidebar-link">vue 强迫重新渲染</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vue-路由跳转重渲染" class="sidebar-link">vue 路由跳转重渲染</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#四月" class="sidebar-link">四月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#echarts-平均值-tooltip-的问题" class="sidebar-link">echarts 平均值 toolTip 的问题</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vue-中-self-事件修饰符" class="sidebar-link">vue 中 self 事件修饰符</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#正则过滤-index-js-文件" class="sidebar-link">正则过滤 &quot;./index.js&quot; 文件</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#form-表单中-button-的坑" class="sidebar-link">form 表单中 button 的坑</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#cached-函数" class="sidebar-link">cached 函数</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#yarn-升级指定包" class="sidebar-link">yarn 升级指定包</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#关于-vue-button-组件的小坑" class="sidebar-link">关于 vue button 组件的小坑</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#五月" class="sidebar-link">五月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#let、const、function、class-在-switch-中作用域问题" class="sidebar-link">let、const、function、class 在 switch 中作用域问题</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#输入框-input、change-事件的区别" class="sidebar-link">输入框 input、change 事件的区别</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#webpack-hmr-原理" class="sidebar-link">webpack HMR 原理</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#function-length" class="sidebar-link">Function.length</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#js-变量私有化" class="sidebar-link">js 变量私有化</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vuecli3-使用-webpack-bundle-analyzer" class="sidebar-link">vuecli3 使用 webpack-bundle-analyzer</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#babel-plugin-transform-runtime-使用" class="sidebar-link">@babel/plugin-transform-runtime 使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#六月" class="sidebar-link">六月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#babel-开启es7装饰者模式" class="sidebar-link">Babel 开启ES7装饰者模式</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#new-构造函数背后发生了什么" class="sidebar-link">new 构造函数背后发生了什么</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#transitionend-事件细节" class="sidebar-link">transitionend 事件细节</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#css-加载会造成阻塞吗？" class="sidebar-link">css 加载会造成阻塞吗？</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#在-webpack-中-process-env-node-env-是如何生效的" class="sidebar-link">在 webpack 中 process.env.NODE_ENV 是如何生效的</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#关于-npm-包版本号前缀-和-区别" class="sidebar-link">关于 npm 包版本号前缀 ~ 和 ^ 区别</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#七月" class="sidebar-link">七月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#falsy-和-truthy" class="sidebar-link">Falsy](https://developer.mozilla.org/zh-CN/docs/Glossary/Falsy) 和 [Truthy</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#事件传播的三个阶段是什么？" class="sidebar-link">事件传播的三个阶段是什么？</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#flex-项目属性值记录" class="sidebar-link">flex 项目属性值记录</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#关于-观察者模式和发布订阅模式" class="sidebar-link">关于 观察者模式和发布订阅模式</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#js-词法分析" class="sidebar-link">js 词法分析</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#关于-axios-无法请求-koa-写的接口的问题" class="sidebar-link">关于 axios 无法请求 koa 写的接口的问题</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#jenkins-常用的环境变量" class="sidebar-link">jenkins 常用的环境变量</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#window-performance-计算首屏时间" class="sidebar-link">window.performance 计算首屏时间</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#打印-dom-对象具体信息" class="sidebar-link">打印 dom 对象具体信息</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#八月" class="sidebar-link">八月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#如何前后端配合自定义请求响应头字段" class="sidebar-link">如何前后端配合自定义请求响应头字段</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#img在外层div使用-line-height-居中无效？" class="sidebar-link">img在外层div使用 line- height 居中无效？</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#scss-extend" class="sidebar-link">scss @extend</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#桥接-vue-组件api的方式" class="sidebar-link">桥接 vue 组件api的方式</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#获取最外层节点的-offsetleft" class="sidebar-link">获取最外层节点的 offsetLeft</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#css-多行文本溢出效果" class="sidebar-link">css 多行文本溢出效果</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#http-状态码" class="sidebar-link">http 状态码</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#九月" class="sidebar-link">九月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vue-extend" class="sidebar-link">Vue.extend</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#empty-伪类" class="sidebar-link">:empty 伪类</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#判断浏览器事件侦听器是否兼容passive" class="sidebar-link">判断浏览器事件侦听器是否兼容passive</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#逗号操作符" class="sidebar-link">逗号操作符</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#判断浏览器是否已滚动到底部" class="sidebar-link">判断浏览器是否已滚动到底部</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#为什么vue组件选项中的data必须是个函数？" class="sidebar-link">为什么vue组件选项中的data必须是个函数？</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#十月" class="sidebar-link">十月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#tree-组件半选框的核心逻辑" class="sidebar-link">tree 组件半选框的核心逻辑</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vue-nexttick-渲染时机" class="sidebar-link">Vue.nextTick 渲染时机</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#js-什么时候一定要写分号" class="sidebar-link">js 什么时候一定要写分号</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#如何劫持ajax请求？" class="sidebar-link">如何劫持ajax请求？</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#如何判断该函数是不是原生函数" class="sidebar-link">如何判断该函数是不是原生函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#十一月" class="sidebar-link">十一月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#text-overflow-ellipsis-不生效的原因？" class="sidebar-link">text-overflow: ellipsis 不生效的原因？</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#把数组某个值快速置后的方法" class="sidebar-link">把数组某个值快速置后的方法</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#为什么-为-true" class="sidebar-link">为什么 [] == ![] 为 true ?</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vue2-x-响应式实现观察者模式精简版" class="sidebar-link">vue2.x 响应式实现观察者模式精简版</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#十二月" class="sidebar-link">十二月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vue-jsx-click-native-写法" class="sidebar-link">vue jsx @click.native 写法</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vue-router3-1-push-相同路由报错的解决方法" class="sidebar-link">vue-router3.1 push 相同路由报错的解决方法</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#关于ajax发送cookie到服务端发生跨域的问题" class="sidebar-link">关于ajax发送cookie到服务端发生跨域的问题</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#encodeuri-和-encodeuricomponent-的区别" class="sidebar-link">encodeURI() 和 encodeURIComponent() 的区别</a></li></ul></li></ul></li><li><a href="/Notebook/dailyRecord/2018.html" class="sidebar-link">2018</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>interview</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Notebook/dailyRecord/interview.html" class="sidebar-link">面试复习</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2019"><a href="#_2019" aria-hidden="true" class="header-anchor">#</a> 2019</h1> <h2 id="一月"><a href="#一月" aria-hidden="true" class="header-anchor">#</a> 一月</h2> <h3 id="利用-coverage-检测可以懒加载的-modules"><a href="#利用-coverage-检测可以懒加载的-modules" aria-hidden="true" class="header-anchor">#</a> 利用 Coverage 检测可以懒加载的 modules</h3> <p>1、打开 devTools，按<code>Ctrl+shift+p</code>，mac(<code>cmd+shift+p</code>)，输入<code>Coverage</code>，选<code>Drawer: Coverage</code></p> <p>2、reload</p> <p>3、可以看到哪些 modules 可以用<code>import()</code>懒加载了</p> <h3 id="nginx-vue-history-爬坑"><a href="#nginx-vue-history-爬坑" aria-hidden="true" class="header-anchor">#</a> nginx vue history 爬坑</h3> <p>按照官方<code>nginx</code>的参考配置：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>location / <span class="token punctuation">{</span>
  try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.html<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果是项目在根目录倒没啥问题，但如果项目在 xxx 路径下，比如在<code>http://ip/vue/</code>路径下，点击跳转到路由<code>http://ip/vue/about</code>下是 ok 的，但是一刷新页面，你会发现就不好使了。原因很简单，就在上面的配置中:</p> <p><code>try_files $uri $uri/ /index.html</code> =&gt; <code>http://ip/vue/about/index.html</code></p> <p>所以，这种情况正确的操作是：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>location /vue/ <span class="token punctuation">{</span>
  try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /vue/index.html<span class="token punctuation">;</span><span class="token comment"># 全部跳回到vue/index.html页面中</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注意， <code>/vue/</code>实际上你上面配的<code>root</code>下的 vue 文件夹，比如你的<code>root</code>是<code>/app</code>，<code>location /vue/</code>即为 <code>location /app/vue/</code></p> <h3 id="iview-menu-组件无法高亮展开问题"><a href="#iview-menu-组件无法高亮展开问题" aria-hidden="true" class="header-anchor">#</a> iview menu 组件无法高亮展开问题</h3> <p>在 iview Menu 组件中，如果数据是异步请求的，动态设置<code>activeName</code>、<code>openNames</code>会不生效，原因是 activeName、或者 openNames 这些优先告诉 Menu 组件了，挂载时(menuData 还没获取到)就已经确定好这些状态，就算是 menuData 获取到了，也不会触发 setter 进行页面状态更新</p> <p><strong>解决方案</strong></p> <p>方案 1：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 利用watch</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 异步获取数据更新时，需要进行高亮、展开节点更新</span>
  <span class="token function">menuData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>menu<span class="token punctuation">.</span><span class="token function">updateActiveName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>menu<span class="token punctuation">.</span><span class="token function">updateOpened</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">activeName</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>menu<span class="token punctuation">.</span><span class="token function">updateActiveName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">openNames</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>menu<span class="token punctuation">.</span><span class="token function">updateOpened</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>方案 2：</p> <p><code>&lt;Menu v-if=&quot;menuData.length !== 0&quot;/&gt;</code></p> <h3 id="滚动进度条核心代码"><a href="#滚动进度条核心代码" aria-hidden="true" class="header-anchor">#</a> 滚动进度条核心代码</h3> <div class="custom-block tip"><p class="custom-block-title">原理</p> <p>视口滚动的距离 / (文档总高度 - 视口高度)</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// jq</span>
<span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token comment">// js</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> scrollTop<span class="token punctuation">,</span> scrollHeight<span class="token punctuation">,</span> clientHeight <span class="token punctuation">}</span> <span class="token operator">=</span> document<span class="token punctuation">.</span>scrollingElement<span class="token punctuation">;</span>
<span class="token punctuation">(</span>scrollTop <span class="token operator">/</span> <span class="token punctuation">(</span>scrollHeight <span class="token operator">-</span> clientHeight<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="二月"><a href="#二月" aria-hidden="true" class="header-anchor">#</a> 二月</h2> <h3 id="vue-jsx-使用全局组件"><a href="#vue-jsx-使用全局组件" aria-hidden="true" class="header-anchor">#</a> vue jsx 使用全局组件</h3> <p>在 vue jsx 中只能使用<code>(kebab-case)</code>的全局组件，不能使用<code>(PascalCase)</code>，如果要使用<code>(PascalCase)</code>，可以这么写</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">render</span> <span class="token punctuation">(</span>h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> Tabs<span class="token punctuation">,</span> TabPane <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>components<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Tabs<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>TabPane<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>TabPane<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Tabs<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="tomcat-开启-gzip-配置"><a href="#tomcat-开启-gzip-配置" aria-hidden="true" class="header-anchor">#</a> tomcat 开启 gzip 配置</h3> <p>在<code>conf/server.xml</code>文件中进行配置</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Connector</span>  <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>8088<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">protocol</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>HTTP/1.1<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">connectionTimeout</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>20000<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">redirectPort</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>8443<span class="token punctuation">&quot;</span></span> <span class="token attr-name">URIEncoding</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span>
	          <span class="token attr-name">useSendfile</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">compression</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>on<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">compressionMinSize</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">noCompressionUserAgents</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>gozilla,traviata<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">compressableMimeType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/html,text/xml,text/javascript,application/x-javascript,application/javascript,text/css,text/plain<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="vuecli3-开启-gzip-配置"><a href="#vuecli3-开启-gzip-配置" aria-hidden="true" class="header-anchor">#</a> vuecli3 开启 gzip 配置</h3> <p>安装 webpack 插件</p> <div class="language- extra-class"><pre class="language-text"><code>yarn add compression-webpack-plugin -D
</code></pre></div><p>配置 vue.config.js</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  chainWebpack<span class="token punctuation">:</span> config <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      config<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">&quot;CompressionPlugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>CompressionPlugin<span class="token punctuation">,</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          filename<span class="token punctuation">:</span> <span class="token string">&quot;[path].gz[query]&quot;</span><span class="token punctuation">,</span>
          algorithm<span class="token punctuation">:</span> <span class="token string">&quot;gzip&quot;</span><span class="token punctuation">,</span>
          test<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;\.(js|css)$&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          threshold<span class="token punctuation">:</span> <span class="token number">10240</span><span class="token punctuation">,</span>
          minRatio<span class="token punctuation">:</span> <span class="token number">0.8</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="三月"><a href="#三月" aria-hidden="true" class="header-anchor">#</a> 三月</h2> <h3 id="vue-v-model-细节"><a href="#vue-v-model-细节" aria-hidden="true" class="header-anchor">#</a> vue v-model 细节</h3> <p><code>v-model</code> 在内部使用不同的属性为不同的输入元素并抛出不同的事件：</p> <ul><li>text 和 textarea 元素使用 value 属性和 input 事件</li> <li>checkbox 和 radio 使用 checked 属性和 change 事件</li> <li>select 字段将 value 作为 prop 并将 change 作为事件</li></ul> <h3 id="js-找出数组最大最小值"><a href="#js-找出数组最大最小值" aria-hidden="true" class="header-anchor">#</a> js 找出数组最大最小值</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">getMaxNumber</span> <span class="token operator">=</span> array <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">getMinNumber</span> <span class="token operator">=</span> array <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token operator">...</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="vue-强迫重新渲染"><a href="#vue-强迫重新渲染" aria-hidden="true" class="header-anchor">#</a> vue 强迫重新渲染</h3> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&quot;comp&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;被重新渲染了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">render</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;span&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;组件&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    key<span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>key<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">render</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> vm <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
      <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;comp&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        key<span class="token punctuation">:</span> vm<span class="token punctuation">.</span>key
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">h</span><span class="token punctuation">(</span>
        <span class="token string">&quot;button&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            click<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              vm<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;刷新&quot;</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="vue-路由跳转重渲染"><a href="#vue-路由跳转重渲染" aria-hidden="true" class="header-anchor">#</a> vue 路由跳转重渲染</h3> <p>比如，在点击菜单切换，在父组件中会进行<code>$router.push({name: xxx, query: xxx})</code>切换子路由页面(同一个组件)，子路由页面会获取相关路由参数进行数据请求，但是 vue-router 会默认<strong>同一组件不重复实例化</strong>，所以我们有 2 种方法：</p> <p>1、子路由<code>watch: $route</code>，然后进行相关请求逻辑</p> <p>2、每次跳转路由(即使是同一个)都强制重刷新</p> <p>第一种方法经常用了，这里不再详叙。根据上个笔记的启发，我们可以通过如下写法轻松实现强制组件重渲染</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$route.fullPath<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>注意，组件渲染量少的话可以使用，如果组件很重，还是建议使用第一种方法</p> <h2 id="四月"><a href="#四月" aria-hidden="true" class="header-anchor">#</a> 四月</h2> <h3 id="echarts-平均值-tooltip-的问题"><a href="#echarts-平均值-tooltip-的问题" aria-hidden="true" class="header-anchor">#</a> echarts 平均值 toolTip 的问题</h3> <p>在 echarts 默认出现的 toolTip 中，可能会出现<code>null</code>等奇怪的东西出来，需要用 formatter 解决</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> option <span class="token operator">=</span> <span class="token punctuation">{</span>
  tooltip<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">formatter</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// marker 是小圆点</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> color<span class="token punctuation">,</span> marker<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value <span class="token punctuation">}</span> <span class="token operator">=</span> params<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> color <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>marker<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="vue-中-self-事件修饰符"><a href="#vue-中-self-事件修饰符" aria-hidden="true" class="header-anchor">#</a> vue 中 self 事件修饰符</h3> <p><code>.self</code> 事件修饰符实际等于 <code>if (event.target !== event.currentTarget) return</code></p> <h3 id="正则过滤-index-js-文件"><a href="#正则过滤-index-js-文件" aria-hidden="true" class="header-anchor">#</a> 正则过滤 &quot;./index.js&quot; 文件</h3> <p><code>/\.\/(?!index\.)\w*\.js$/.test(&quot;./index.js&quot;)</code></p> <h3 id="form-表单中-button-的坑"><a href="#form-表单中-button-的坑" aria-hidden="true" class="header-anchor">#</a> form 表单中 button 的坑</h3> <p>在<code>form</code>表单中，如果含有<code>button</code>按钮标签，点击则会重载页面，原因是因为在浏览器中，<code>button</code>的<code>type</code>属性会有默认值，w3c 标准如下：</p> <blockquote><p>请始终为按钮规定 type 属性。Internet Explorer 的默认类型是 &quot;button&quot;，而其他浏览器中（包括 W3C 规范）的默认值是 &quot;submit&quot;。</p></blockquote> <p><code>type</code>属性为<code>submit</code>时会在表单中触发重载页面，所以指定 <code>type</code> 属性为 <code>button</code>即可</p> <p>在 form 表单中，应该用<code>input</code>标签来创建按钮</p> <h3 id="cached-函数"><a href="#cached-函数" aria-hidden="true" class="header-anchor">#</a> cached 函数</h3> <p>该函数一般用于<strong>缓存比较耗时</strong>的函数，主要利用闭包进行实现</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">cached</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> cache <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">cachedFn</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> hit <span class="token operator">=</span> cache<span class="token punctuation">[</span>str<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> hit <span class="token operator">||</span> <span class="token punctuation">(</span>cache<span class="token punctuation">[</span>str<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> fn <span class="token operator">=</span> <span class="token function">cached</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">return</span> str<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">&quot;test1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2.9ms</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">&quot;test1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">&quot;test2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0.005ms // 第一次被缓存，所以非常快</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">&quot;test2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="yarn-升级指定包"><a href="#yarn-升级指定包" aria-hidden="true" class="header-anchor">#</a> yarn 升级指定包</h3> <p>yarn upgrade-interactive --latest</p> <h3 id="关于-vue-button-组件的小坑"><a href="#关于-vue-button-组件的小坑" aria-hidden="true" class="header-anchor">#</a> 关于 vue button 组件的小坑</h3> <p>自己封装了一个<code>button</code>组件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> button <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Button'</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        click<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$slots<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>使用</p> <Button>按钮</Button> <p>这种情况下，是会报找不到 Cannot read property 'stopPropagation' of undefined 这种错</p> <p>解决方案是 把 event 对象传出去即可</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">render</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        click<span class="token punctuation">:</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$slots<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="五月"><a href="#五月" aria-hidden="true" class="header-anchor">#</a> 五月</h2> <h3 id="let、const、function、class-在-switch-中作用域问题"><a href="#let、const、function、class-在-switch-中作用域问题" aria-hidden="true" class="header-anchor">#</a> let、const、function、class 在 switch 中作用域问题</h3> <div class="custom-block tip"><p class="custom-block-title">原理</p> <p>词法声明在整个 switch 语句块中是可见的，但是它只有在运行到它定义的 case 语句时，才会进行初始化操作</p></div> <p>错误示例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">switch</span> <span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>
    <span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span>
    <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token keyword">default</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>正确示例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">switch</span> <span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">case</span> <span class="token number">4</span><span class="token punctuation">:</span>
    <span class="token keyword">var</span> z <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="输入框-input、change-事件的区别"><a href="#输入框-input、change-事件的区别" aria-hidden="true" class="header-anchor">#</a> 输入框 input、change 事件的区别</h3> <div class="custom-block tip"><p class="custom-block-title">MDN文档</p> <blockquote><p>与 input 事件不同，change 事件不一定会对元素值的每次更改触发</p></blockquote></div> <p>也就是说，输入框<code>change</code>事件是在输入值时失去焦点或者按回车才会触发，<code>input</code>事件在输入时就会触发</p> <p>但是在<strong>react</strong>中，这两者是一样的，可以在这看看<a href="https://stackoverflow.com/questions/38256332/in-react-whats-the-difference-between-onchange-and-oninput" target="_blank" rel="noopener noreferrer">原因<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="webpack-hmr-原理"><a href="#webpack-hmr-原理" aria-hidden="true" class="header-anchor">#</a> webpack HMR 原理</h3> <p>步骤：</p> <ol><li>webpack 对文件系统进行 watch 打包到内存中</li> <li>devServer 通知浏览器端文件发生改变</li> <li>webpack-dev-server/client 接收到服务端消息做出响应</li> <li>webpack 接收到最新 hash 值验证并请求模块代码</li> <li>HotModuleReplacement.runtime 对模块进行热更新</li> <li>业务模块调用 HMR 的 accept 方法，添加模块更新后的回调函数</li></ol> <p>参考一个大佬写的<a href="https://zhuanlan.zhihu.com/p/30669007" target="_blank" rel="noopener noreferrer">文章<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="function-length"><a href="#function-length" aria-hidden="true" class="header-anchor">#</a> Function.length</h3> <p><code>Function.length</code> 表示函数形参的个数</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Function<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre></div><h3 id="js-变量私有化"><a href="#js-变量私有化" aria-hidden="true" class="header-anchor">#</a> js 变量私有化</h3> <p>利用闭包</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// name变量私有化</span>
  <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&quot;l&quot;</span><span class="token punctuation">;</span>
  
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>newName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> newName
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// test</span>
<span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;l&quot;</span>
</code></pre></div><h3 id="vuecli3-使用-webpack-bundle-analyzer"><a href="#vuecli3-使用-webpack-bundle-analyzer" aria-hidden="true" class="header-anchor">#</a> vuecli3 使用 webpack-bundle-analyzer</h3> <p>vue-config.js 加入以下几句代码：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  chainWebpack<span class="token punctuation">:</span> config <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// npm xxx --report 这里 npm config 会识别到</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>npm_config_report<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      config
        <span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'webpack-bundle-analyzer'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-bundle-analyzer'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>BundleAnalyzerPlugin<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后 <code>npm run build --report</code> 即可</p> <p>注意，如果用 <code>yarn</code> 的话 <code>npm_config_report</code> 会无法识别</p> <h3 id="babel-plugin-transform-runtime-使用"><a href="#babel-plugin-transform-runtime-使用" aria-hidden="true" class="header-anchor">#</a> @babel/plugin-transform-runtime 使用</h3> <p>这个插件有什么用？</p> <div class="custom-block tip"><p class="custom-block-title">文档原文</p> <blockquote><p>A plugin that enables the re-use of Babel's injected helper code to save on codesize.</p></blockquote></div> <p>也就是可以把重复的babel-helper代码抽离出来，减少重复的代码</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code>yarn add @babel/plugin-transform-runtime -D

yarn add @babel/runtime
</code></pre></div><p>使用 babel.config.js</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/plugin-transform-runtime&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>使用插件前的代码测试</strong></p> <p>测试 <code>async/await</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>使用 <code>@babel/preset-env</code> 后，为了支持 <code>async/await</code>，会在代码加入下面几个函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">asyncGeneratorStep</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token comment">// 很长，省略</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">_asyncToGenerator</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token comment">// 很长，省略</span>
<span class="token punctuation">}</span>

<span class="token comment">// 开始转译 async/await ...</span>
</code></pre></div><p>这些每个有 <code>async/await</code> 的地方，都有上面2个 helper 函数存在，这样代码会非常冗余</p> <p><strong>使用插件后的情况</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> _interopRequireDefault <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@babel/runtime/helpers/interopRequireDefault&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> _regenerator <span class="token operator">=</span> <span class="token function">_interopRequireDefault</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@babel/runtime/regenerator&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> _asyncToGenerator2 <span class="token operator">=</span> <span class="token function">_interopRequireDefault</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@babel/runtime/helpers/asyncToGenerator&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这样，可以做到重复利用 helper 函数，减少大量的重复代码</p> <h2 id="六月"><a href="#六月" aria-hidden="true" class="header-anchor">#</a> 六月</h2> <h3 id="babel-开启es7装饰者模式"><a href="#babel-开启es7装饰者模式" aria-hidden="true" class="header-anchor">#</a> Babel 开启ES7装饰者模式</h3> <p>安装插件</p> <div class="language- extra-class"><pre class="language-text"><code>yarn add @babel/plugin-proposal-decorators @babel/plugin-proposal-class-properties -D
</code></pre></div><p>增加 <code>plugins</code> 配置：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&quot;@babel/plugin-proposal-decorators&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> legacy<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&quot;@babel/plugin-proposal-class-properties&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> loose<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="new-构造函数背后发生了什么"><a href="#new-构造函数背后发生了什么" aria-hidden="true" class="header-anchor">#</a> new 构造函数背后发生了什么</h3> <ul><li>以构造器的 <code>prototype</code> 属性为原型，创建新对象</li> <li>将新对象为 <code>this</code>，调用参数传给构造器，执行</li> <li>如果构造器返回的是对象，则返回，否则返回第一步创建的对象</li></ul> <p>如何实现一个<code>new</code>函数呢？</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">_new</span><span class="token punctuation">(</span>Constructor<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>Constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> Constructor<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> res <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token operator">?</span> res <span class="token punctuation">:</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="transitionend-事件细节"><a href="#transitionend-事件细节" aria-hidden="true" class="header-anchor">#</a> transitionend 事件细节</h3> <blockquote><p>当 transition 完成前移除 transition 时，比如移除 css 的 <code>transition-property</code> 属性，事件将不会被触发，还有在 transition 完成前设置 <code>display: none</code>，事件同样不会被触发</p></blockquote> <h3 id="css-加载会造成阻塞吗？"><a href="#css-加载会造成阻塞吗？" aria-hidden="true" class="header-anchor">#</a> css 加载会造成阻塞吗？</h3> <p>看到一篇不错的文章，请戳 <a href="https://zhuanlan.zhihu.com/p/43282197" target="_blank" rel="noopener noreferrer">css加载会造成阻塞吗<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>结论：</p> <ul><li>css加载不会阻塞DOM树的解析</li> <li>css加载会阻塞DOM树的渲染</li> <li>css加载会阻塞后面js语句的执行</li></ul> <h3 id="在-webpack-中-process-env-node-env-是如何生效的"><a href="#在-webpack-中-process-env-node-env-是如何生效的" aria-hidden="true" class="header-anchor">#</a> 在 webpack 中 process.env.NODE_ENV 是如何生效的</h3> <p>最近在做项目时，经常会用 <code>process.env.NODE_ENV</code> 来区分生产环境和开发环境，分别进行不同的逻辑编写，虽然用起来很方便，但是不知道背后是怎么实现。抱着这份好奇心，便研究了一下。</p> <p>在 <code>node.js</code> 环境中，<code>process.env</code> 包含当前的环境变量，但是在 <code>webpack</code> 打包出来的代码是浏览器运行时的，跟 <code>node.js</code> 那种无关。所以在 <code>webpack</code> 环境下，是用了一个名为 <code>DefinePlugin</code> 的插件来实现 <code>process.env</code> 这些功能的</p> <p>关于这个插件，可以看看这里 <a href="https://webpack.js.org/plugins/define-plugin/#usage" target="_blank" rel="noopener noreferrer">https://webpack.js.org/plugins/define-plugin/#usage<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>我当前做的项目是<code>vuecli3</code>构建出来的，看了下<code>webpack</code>配置信息，脚手架很贴心帮我们配置好了，类型这种:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">DefinePlugin</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    <span class="token string">'process.env'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token constant">NODE_ENV</span><span class="token punctuation">:</span> <span class="token string">'&quot;development&quot;'</span><span class="token punctuation">,</span>
      <span class="token constant">BASE_URL</span><span class="token punctuation">:</span> <span class="token string">'&quot;&quot;'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><p>所以，我们在代码中可以这么写</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">isDev</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>但是，问题又来了，比如，我在点击事件中</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>点击后，控制台打印出了上面定义的对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token constant">NODE_ENV</span><span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  <span class="token constant">BASE_URL</span><span class="token punctuation">:</span> <span class="token string">''</span>
<span class="token punctuation">}</span>
</code></pre></div><p>开始我以为 <code>process</code> 这变量是挂在 <code>window</code> 上了，后来验证了下并不是，但是 <code>process.env</code> 是怎么打印出来的呢？</p> <p>后来，我去查了下打包后的代码，发现原来是这么实现的</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Object</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;NODE_ENV&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;BASE_URL&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>DefinePlugin</code> 插件可以在 <code>webpack</code> 编译时就把定义好的变量直接转译了，真相终于被揭晓了。</p> <h3 id="关于-npm-包版本号前缀-和-区别"><a href="#关于-npm-包版本号前缀-和-区别" aria-hidden="true" class="header-anchor">#</a> 关于 npm 包版本号前缀 ~ 和 ^ 区别</h3> <p>~ 会匹配安装最近的小版本依赖包，比如~1.2.3会匹配所有1.2.x版本，但是不包括1.3.0</p> <p>^ 会匹配安装最新的大版本依赖包，比如^1.2.3会匹配所有1.x.x的包，包括1.3.0，但是不包括2.0.0</p> <h2 id="七月"><a href="#七月" aria-hidden="true" class="header-anchor">#</a> 七月</h2> <h3 id="falsy-和-truthy"><a href="#falsy-和-truthy" aria-hidden="true" class="header-anchor">#</a> <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Falsy" target="_blank" rel="noopener noreferrer">Falsy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 和 <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Truthy" target="_blank" rel="noopener noreferrer">Truthy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <blockquote><p><strong>Falsy</strong>(虚值) 是在 Boolean 上下文(条件语句或者循环语句中)中已认定可转换为 <strong>假</strong> 的值</p></blockquote> <p>下面的都是 <code>Falsy</code>：</p> <ul><li><code>undefined</code></li> <li><code>null</code></li> <li><code>NaN</code></li> <li><code>0</code></li> <li><code>''</code></li> <li><code>false</code></li> <li><code>document.all</code></li></ul> <blockquote><p><strong>Truthy</strong>(真值) 是指的是在布尔值上下文中，转换后的值为真的值，除了上面 <strong>Falsy</strong> 以外的值都是真值</p></blockquote> <h3 id="事件传播的三个阶段是什么？"><a href="#事件传播的三个阶段是什么？" aria-hidden="true" class="header-anchor">#</a> 事件传播的三个阶段是什么？</h3> <p>Capturing &gt; Target &gt; Bubbling</p> <p>捕获 &gt; 目标 &gt; 冒泡</p> <h3 id="flex-项目属性值记录"><a href="#flex-项目属性值记录" aria-hidden="true" class="header-anchor">#</a> flex 项目属性值记录</h3> <ul><li>order: <code>&lt;integer&gt;</code> 默认为 0 (定义项目的排列顺序)</li> <li>flex-grow: <code>&lt;number&gt;</code> 默认为 0 (如果存在剩余空间，也不伸展放大)</li> <li>flex-shrink: <code>&lt;number&gt;</code> 默认为 1 (如果空间不足，该项目将被挤压缩小)</li> <li>flex-basis: <code>&lt;length&gt; | auto</code> (定义了在分配多余空间之前，项目占据的主轴空间，auto 为项目的本来大小)</li> <li>flex: <code>none | [ &lt;'flex-grow'&gt; &lt;'flex-shrink'&gt;? || &lt;'flex-basis'&gt; ]</code></li></ul> <h3 id="关于-观察者模式和发布订阅模式"><a href="#关于-观察者模式和发布订阅模式" aria-hidden="true" class="header-anchor">#</a> 关于 观察者模式和发布订阅模式</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 观察者模式</span>
<span class="token comment">// 一种一对多的依赖，当一个对象的状态发生改变时，所以依赖它的对象都将得到通知</span>

<span class="token comment">// demo</span>
<span class="token keyword">class</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  <span class="token function">subscribe</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    target<span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">publish</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>sub <span class="token operator">=&gt;</span> <span class="token function">sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> ob1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Observer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ob2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Observer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ob3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Observer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ob2<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>ob1<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ob2 添加了对 ob1 的依赖，ob1 通知了我会响应'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

ob3<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>ob1<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ob3 添加了对 ob1 的依赖，ob1 通知了我会响应'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

ob1<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ob1 发通知了</span>

<span class="token comment">// 发布-订阅 </span>
<span class="token comment">// 发布-订阅 是观察者的升级版</span>
<span class="token comment">// 发布-订阅 拥有一个调度中心</span>
<span class="token comment">// 如果用 发布-订阅 ，上面 Observer 类的 subscribe 和 publish 方法都在 observer 对象(调度中心) 进行管理</span>

<span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token punctuation">{</span>
  subs<span class="token punctuation">:</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">subscribe</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">publish</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>cb <span class="token operator">=&gt;</span> cb<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

observer<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'ob'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ob 事件被订阅了，可以发布'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

observer<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'obob'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'obob 事件被订阅了，可以发布'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

observer<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'ob'</span><span class="token punctuation">)</span>
observer<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'obob'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="js-词法分析"><a href="#js-词法分析" aria-hidden="true" class="header-anchor">#</a> js 词法分析</h3> <p>js 运行前会进行词法分析，主要为三个步骤：</p> <ul><li><p>分析参数</p></li> <li><p>分析变量的声明</p></li> <li><p>分析函数的声明</p></li></ul> <p>尝试分析下面代码：</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">function</span> <span class="token function">t1</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token punctuation">{</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// function age(){}</span>

  <span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">27</span><span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 27</span>

  <span class="token keyword">function</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 27</span>

<span class="token punctuation">}</span>

<span class="token function">t1</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>具体步骤：</p> <p>函数在运行的瞬间，生成一个活动对象（Active Object），简称 AO</p> <p>第一步：分析参数：</p> <p>函数接收形式参数，添加到 AO 的属性，并且这个时候 age 值为 undefined，即 AO.age=undefined</p> <p>接收实参，添加到 AO 的属性，覆盖之前的 undefined, AO.age = 3</p> <p>第二步：分析变量声明：如 var name;或 var name='mary'，以上代码存在 var age = 27</p> <p>这时候 AO 上面已经有 age 属性了，则不作任何修改，否则，否则 AO 的属性值为 undefined</p> <p>第三步：分析函数的声明：</p> <p>function age(){}把函数赋给 AO.age ,覆盖上一步分析的值</p> <p>AO.age = function age(){}</p> <h3 id="关于-axios-无法请求-koa-写的接口的问题"><a href="#关于-axios-无法请求-koa-写的接口的问题" aria-hidden="true" class="header-anchor">#</a> 关于 axios 无法请求 koa 写的接口的问题</h3> <p>我在前端页面试着用<code>axios</code>请求用<code>koa</code>写的接口，这是前端代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">axiosPost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'shooter'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'http://localhost:3000/json'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这是后端接口：</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/json'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span>
    status<span class="token punctuation">:</span> <span class="token string">'200'</span><span class="token punctuation">,</span>
    data<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>发现这时候请求报了个跨域的错误，于是，我在上面加了跨域处理</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&quot;/*&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// *代表允许来自所有域名请求，包括 OPTION 请求</span>
  ctx<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Origin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>发现还是报了<code>has been blocked by CORS policy: Request header field content-type is not allowed by Access-Control-Allow-Headers in preflight response.</code>这个错误。仔细看下，其实是请求头<code>content-type</code>被修改了，主要原因是<code>axios</code>post请求的<code>content-type</code>默认用<code>application/json</code>，相当于<code>xhr.setRequestHeader('Content-type', 'application/json;');</code>，所以解决方案是允许修改请求头，还要加多一行代码：</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&quot;/*&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// *代表允许来自所有域名请求，包括 OPTION 请求</span>
  ctx<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Origin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Headers&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这样就可以了</p> <p>为再验证下，手写了个原生<code>post</code>请求：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">postJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'shooter'</span>
  <span class="token punctuation">}</span>
  xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'post'</span><span class="token punctuation">,</span> <span class="token string">'http://localhost:3000/json'</span><span class="token punctuation">)</span>
  <span class="token comment">// 不设这个，上面不设 ctx.set(&quot;Access-Control-Allow-Headers&quot;, &quot;*&quot;);不报错</span>
  <span class="token comment">// 设了这个，上面就要设 Access-Control-Allow-Headers&quot;</span>
  xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-type'</span><span class="token punctuation">,</span> <span class="token string">'application/json;'</span><span class="token punctuation">)</span>
  xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>

  xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>用中间件 <a href="https://github.com/zadzbw/koa2-cors" target="_blank" rel="noopener noreferrer">koa2-cors<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 也可以解决这类问题</p> <h3 id="jenkins-常用的环境变量"><a href="#jenkins-常用的环境变量" aria-hidden="true" class="header-anchor">#</a> jenkins 常用的环境变量</h3> <div class="language- extra-class"><pre class="language-text"><code>项目名称：PROJECT_NAME

构建编号：BUILD_NUMBER

构建状态：BUILD_STATUS

触发原因：CAUSE

构建地址：BUILD_URL
</code></pre></div><h3 id="window-performance-计算首屏时间"><a href="#window-performance-计算首屏时间" aria-hidden="true" class="header-anchor">#</a> window.performance 计算首屏时间</h3> <ul><li>首屏时间 = window.performance.timing.domContentLoadedEventEnd - window.performance.timing.domLoading</li> <li>白屏时间 = window.performance.timing.domLoading - window.performance.timing.fetchStart</li></ul> <h3 id="打印-dom-对象具体信息"><a href="#打印-dom-对象具体信息" aria-hidden="true" class="header-anchor">#</a> 打印 dom 对象具体信息</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span>div<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 用数组包一层</span>
</code></pre></div><h2 id="八月"><a href="#八月" aria-hidden="true" class="header-anchor">#</a> 八月</h2> <h3 id="如何前后端配合自定义请求响应头字段"><a href="#如何前后端配合自定义请求响应头字段" aria-hidden="true" class="header-anchor">#</a> 如何前后端配合自定义请求响应头字段</h3> <p>前端如果要获取<code>response header</code>里面的值，可以通过<code>XMLHttpRequest</code>实例的<code>getResponseHeader()</code>方法进行获取，但是根据<a href="https://www.w3.org/TR/2014/REC-cors-20140116/" target="_blank" rel="noopener noreferrer">w3c-cors标准<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，参考<strong>7.1.1</strong>，可以看出不是所有的请求头字段都可以获取到，只有<code>simple-response-header</code>和设置了<code>Access-Control-Expose-Headers</code>指定字段才可以被<code>getResponseHeader()</code>获取到，关于<code>simple-response-header</code>有以下这几种：</p> <ul><li>Cache-Control</li> <li>Content-Language</li> <li>Content-Type</li> <li>Expires</li> <li>Last-Modified</li> <li>Pragma</li></ul> <p>这几种都可以获取到。</p> <p>但是，如果我想自定义一个字段，就需要和后端配合<code>Access-Control-Expose-Headers</code>来实现</p> <p>比如在<code>koa</code>中，设置对应的字段即可：</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/get'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Expose-Headers'</span><span class="token punctuation">,</span> <span class="token string">'token'</span><span class="token punctuation">)</span>
  ctx<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">,</span> <span class="token string">'123456'</span><span class="token punctuation">)</span>
  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token string">'success'</span>
  <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>使用<code>axios</code>请求就能在返回的对象<code>headers</code>字段中获取：</p> <div class="language-js extra-class"><pre class="language-js"><code>axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/get'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '123456'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="img在外层div使用-line-height-居中无效？"><a href="#img在外层div使用-line-height-居中无效？" aria-hidden="true" class="header-anchor">#</a> img在外层div使用 line- height 居中无效？</h3> <p>解决方案1：</p> <p><code>img</code>元素使用 <code>vertical-align: middle</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>xxx<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">div</span> <span class="token punctuation">{</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">div img</span> <span class="token punctuation">{</span>
  <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>解决方案2：</p> <p>不用<code>line-height</code>居中，直接用<code>flex + margin</code></p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">div</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">div img</span> <span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> auto 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="scss-extend"><a href="#scss-extend" aria-hidden="true" class="header-anchor">#</a> scss @extend</h3> <p>scss 提供的<code>@extend</code>函数非常方便，甚至伪类都可以被继承:</p> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token selector">.item </span><span class="token punctuation">{</span>
  <span class="token selector"><span class="token parent important">&amp;</span>:hover </span><span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
  <span class="token selector"><span class="token parent important">&amp;</span>.active </span><span class="token punctuation">{</span>
    <span class="token keyword">@extend</span> <span class="token punctuation">:</span>hover<span class="token punctuation">;</span> <span class="token comment">// 这样 .item.active 便可继承 .item:hover 的样式了</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="桥接-vue-组件api的方式"><a href="#桥接-vue-组件api的方式" aria-hidden="true" class="header-anchor">#</a> 桥接 vue 组件api的方式</h3> <p>使用 <code>v-bind</code> 属性和 <code>v-on</code> 事件即可实现：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppList</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$props<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-on</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$listeners<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- ... --&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AppList</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">import</span> AppList <span class="token keyword">from</span> <span class="token string">&quot;./AppList&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'SortableList'</span><span class="token punctuation">,</span>
    props<span class="token punctuation">:</span> AppList<span class="token punctuation">.</span>props<span class="token punctuation">,</span>
    components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      AppList
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这样<code>SortableList</code>组件的属性和事件就和<code>AppList</code>组件一致了</p> <h3 id="获取最外层节点的-offsetleft"><a href="#获取最外层节点的-offsetleft" aria-hidden="true" class="header-anchor">#</a> 获取最外层节点的 offsetLeft</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getElementLeft</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
　<span class="token keyword">let</span> actualLeft <span class="token operator">=</span> element<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
　<span class="token keyword">let</span> current <span class="token operator">=</span> element<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>

　<span class="token keyword">while</span> <span class="token punctuation">(</span>current <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
　　actualLeft <span class="token operator">+=</span> current<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
　　current <span class="token operator">=</span> current<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
　<span class="token punctuation">}</span>

　<span class="token keyword">return</span> actualLeft<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="css-多行文本溢出效果"><a href="#css-多行文本溢出效果" aria-hidden="true" class="header-anchor">#</a> css 多行文本溢出效果</h3> <ul><li>单行：</li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
<span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
</code></pre></div><ul><li>多行：</li></ul> <p>仅兼容webkit内核的浏览器</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token property">display</span><span class="token punctuation">:</span> -webkit-box<span class="token punctuation">;</span>
<span class="token property">-webkit-box-orient</span><span class="token punctuation">:</span> vertical<span class="token punctuation">;</span>
<span class="token property">-webkit-line-clamp</span><span class="token punctuation">:</span> 3<span class="token punctuation">;</span>
<span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
</code></pre></div><ul><li>兼容：</li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">p</span><span class="token punctuation">{</span><span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span> <span class="token property">line-height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span> <span class="token property">max-height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span><span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">p::after</span><span class="token punctuation">{</span><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">;</span> <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span> <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> <span class="token property">padding-left</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
<span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">-webkit-linear-gradient</span><span class="token punctuation">(</span>left, transparent, #fff 55%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">-o-linear-gradient</span><span class="token punctuation">(</span>right, transparent, #fff 55%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">-moz-linear-gradient</span><span class="token punctuation">(</span>right, transparent, #fff 55%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right, transparent, #fff 55%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="http-状态码"><a href="#http-状态码" aria-hidden="true" class="header-anchor">#</a> http 状态码</h3> <p>状态代码有三位数字组成，第一个数字定义了响应的类别，共分五种类别:</p> <ul><li>1xx：指示信息--表示请求已接收，继续处理</li> <li>2xx：成功--表示请求已被成功接收、理解、接受</li> <li>3xx：重定向--要完成请求必须进行更进一步的操作</li> <li>4xx：客户端错误--请求有语法错误或请求无法实现</li> <li>5xx：服务器端错误--服务器未能实现合法的请求</li></ul> <h2 id="九月"><a href="#九月" aria-hidden="true" class="header-anchor">#</a> 九月</h2> <h3 id="vue-extend"><a href="#vue-extend" aria-hidden="true" class="header-anchor">#</a> Vue.extend</h3> <p>根据文档解释：</p> <blockquote><p>使用基础 Vue 构造器，创建一个“子类”。参数是一个包含组件选项的对象。</p></blockquote> <p>其实就是返回一个<code>VueComponent</code>函数，和调用<code>Vue.component</code>(选项不为<code>null</code>前提)返回的一样：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">Sub</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">VueComponent</span> <span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_init</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> Sub<span class="token punctuation">;</span>
</code></pre></div><p>使用的话，可以这样：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Ctor <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  template<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`&lt;div&gt;comp&lt;/div&gt;`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> 

<span class="token comment">// 这里还是可以传入组件选项的对象</span>
<span class="token comment">// 实例化一个组件</span>
<span class="token keyword">const</span> comp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ctor</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 使用</span>
comp<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>comp<span class="token punctuation">.</span>$el<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="empty-伪类"><a href="#empty-伪类" aria-hidden="true" class="header-anchor">#</a> :empty 伪类</h3> <p><code>:empty</code>选择器选择每个没有任何子级的元素，包括文本节点</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">div:empty</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="判断浏览器事件侦听器是否兼容passive"><a href="#判断浏览器事件侦听器是否兼容passive" aria-hidden="true" class="header-anchor">#</a> 判断浏览器事件侦听器是否兼容<code>passive</code></h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> supportsPassive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token comment">// 通过 getter 判断</span>
  <span class="token keyword">var</span> opts <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'passive'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> supportsPassive <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 绑定一个事件，触发上面的 getter，如果异常，说明浏览器不支持</span>
  document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> opts<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

elem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchstart'</span><span class="token punctuation">,</span> fn<span class="token punctuation">,</span> supportsPassive <span class="token operator">?</span> <span class="token punctuation">{</span> passive<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="逗号操作符"><a href="#逗号操作符" aria-hidden="true" class="header-anchor">#</a> 逗号操作符</h3> <p>逗号操作符用得很少，偏冷门，但是面试可能会被问到，所以在此记录下</p> <blockquote><p>逗号操作符，对它的每个操作数求值（从左到右），并返回最后一个操作数的值</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

x <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">++</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// x &gt; 2</span>

<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>

arr<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment">// arr[2] &gt; 3</span>

</code></pre></div><h3 id="判断浏览器是否已滚动到底部"><a href="#判断浏览器是否已滚动到底部" aria-hidden="true" class="header-anchor">#</a> 判断浏览器是否已滚动到底部</h3> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> scrollTop<span class="token punctuation">,</span> scrollHeight<span class="token punctuation">,</span> clientHeight <span class="token punctuation">}</span> <span class="token operator">=</span> document<span class="token punctuation">.</span>scrollingElement<span class="token punctuation">;</span>

  <span class="token comment">// 滚动高度 + 视口高度 &gt;= 文档总高度</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>scrollTop <span class="token operator">+</span> clientHeight <span class="token operator">&gt;=</span> scrollHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'到达底部了~'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="为什么vue组件选项中的data必须是个函数？"><a href="#为什么vue组件选项中的data必须是个函数？" aria-hidden="true" class="header-anchor">#</a> 为什么vue组件选项中的data必须是个函数？</h3> <p>注册组件的本质实际上是建立一个组件构造器的引用，在使用时才会去实例化。也就是生成一个function。</p> <p>下面就关于原型的知识了</p> <p>​组件data属性实际上在挂载到 构造器function.prototype上的，比如</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">Comp</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

Comp<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token operator">...</span>
</code></pre></div><p>​如果该原型下的data属性值为<strong>对象</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建构造器Comp</span>
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'Comp'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">Comp</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> data <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 类似于这种</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 简化后的代码实际上是这个</span>
<span class="token comment">// 取到注册对象 data 属性并挂载到构造器原型上</span>
Comp<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  b<span class="token punctuation">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token comment">// 如果多次实例化</span>
<span class="token keyword">const</span> compA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Comp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> compB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Comp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

compA<span class="token punctuation">.</span>data <span class="token operator">===</span> compB<span class="token punctuation">.</span>data<span class="token punctuation">;</span> <span class="token comment">// true 两者共同指向同一地址</span>
compA<span class="token punctuation">.</span>data<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>compB<span class="token punctuation">.</span>data<span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3 (这样就容易引起麻烦)</span>

</code></pre></div><p>为了避免引发上述的麻烦，通过函数独立作用域便可解决</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建构造器Comp</span>
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'Comp'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 每次调用都返回一个新的对象</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    	b<span class="token punctuation">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">Comp</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> data <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 调用原型 data 函数，每个组件实例都有各自的数据副本，避免数据互相影响</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Comp<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">data</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  b<span class="token punctuation">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> compA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Comp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> compB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Comp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

compA<span class="token punctuation">.</span>data <span class="token operator">===</span> compB<span class="token punctuation">.</span>data<span class="token punctuation">;</span> <span class="token comment">// false</span>

</code></pre></div><h2 id="十月"><a href="#十月" aria-hidden="true" class="header-anchor">#</a> 十月</h2> <h3 id="tree-组件半选框的核心逻辑"><a href="#tree-组件半选框的核心逻辑" aria-hidden="true" class="header-anchor">#</a> tree 组件半选框的核心逻辑</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">indeterminate</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 递归获取该节点下的所有子节点</span>
  <span class="token keyword">const</span> leafNodes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getLeafNodes</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">// indet 为半选控制</span>
    <span class="token comment">// 当子节点非全部选中时和至少有一个子节点被选中，才会出现半选</span>
    indet<span class="token punctuation">:</span>
      <span class="token operator">!</span>leafNodes<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span>n <span class="token operator">=&gt;</span> n<span class="token punctuation">.</span>selected<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> leafNodes<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>n <span class="token operator">=&gt;</span> n<span class="token punctuation">.</span>selected<span class="token punctuation">)</span><span class="token punctuation">,</span>
      value<span class="token punctuation">:</span> leafNodes<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span>n <span class="token operator">=&gt;</span> n<span class="token punctuation">.</span>selected<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="vue-nexttick-渲染时机"><a href="#vue-nexttick-渲染时机" aria-hidden="true" class="header-anchor">#</a> Vue.nextTick 渲染时机</h3> <p>先来看一段代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// setTimeout 模拟请求，都是task</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  app<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment">// 这里也是执行 nextTick</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>$el<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span> <span class="token comment">// 1</span>
  Vue<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>$el<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span> <span class="token comment">// 2</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'卡住线程，阻塞渲染'</span><span class="token punctuation">)</span> <span class="token comment">// 可以看到视图上还是 1</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre></div><p><code>nextTick</code>本质是<strong>microtask</strong>，浏览器渲染时序是</p> <blockquote><p>执行当前 macrotask -&gt; 清空 microtask -&gt; render layout</p></blockquote> <p>这也是<strong>eventloop</strong>的基本特征</p> <p>vue文档上说，只有在nextTick回调中才能拿到更新后的值，为什么这么做？实际上是用于优化减少dom的操作</p> <p>你会发现，上述代码中，根据注释，在同个事件循环中(上面两个<code>nextTick</code>隶属于同个事件循环)，为什么在后面那个<code>nextTick</code>中能拿到最新的值呢，毕竟视图并没有更新。</p> <blockquote><p>js获取视图新的节点值不一定要等到UI更新后才能拿到</p></blockquote> <p>通过添加<code>alert</code>阻塞视图渲染，印证了这个原理，在视图没更新的情况下，我们也能拿到dom节点的最新值。</p> <h3 id="js-什么时候一定要写分号"><a href="#js-什么时候一定要写分号" aria-hidden="true" class="header-anchor">#</a> js 什么时候一定要写分号</h3> <p>在 JavaScript 中，分号通常是可选的，因为会自动插入分号（ASI)。你可以使用 semi 规则要求或禁止分号。</p> <p>ASI 的规则是相对简单的：正如 Isaac Schlueter 曾经描述的那样，一个 \n 字符总是一个语句的结尾(像分号一样)，除非下面之一为真：</p> <ul><li>该语句有一个没有闭合的括号，数组字面量或对象字面量或其他某种方式，不是有效结束一个语句的方式。（比如，以 . 或 , 结尾）</li> <li>该行是 -- 或 ++（在这种情况下它将减量/增量的下一个标记）</li> <li>它是个 for()、while()、do、if() 或 else，并且没有 {</li> <li>下一行以 [、(、+、*、/、-、,、. 或一些其它在单个表达式中两个标记之间的二元操作符。</li></ul> <p>换行不结束语句，书写错误遗漏了分号，这些异常会导致两个不相干的连续的行被解释为一个表达式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> b
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
</code></pre></div><p>这段代码实际上是</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
</code></pre></div><p>所以必须写成</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
</code></pre></div><p>这样才不会运行错误!</p> <p>还有，函数立即执行</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">123</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>有没有看出问题？这段代码是会运行报错的！因为这满足了上面文字中的第4条！</p> <p>实际上还是这样执行</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>所以要这么写</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>或者</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">123</span>
<span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>如果你本人是拒绝分号党，那么强烈建议你用<code>eslint</code>帮你预警！不然还是回归到分号党吧！</p> <h3 id="如何劫持ajax请求？"><a href="#如何劫持ajax请求？" aria-hidden="true" class="header-anchor">#</a> 如何劫持ajax请求？</h3> <p>本质是劫持<code>XMLHttpRequest</code>实例的<code>send</code>请求，所以我们可以重写这个方法进行劫持：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">XML</span> <span class="token keyword">extends</span> <span class="token class-name">XMLHttpRequest</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">send</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hhh，被我发现了吧'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用父类方法可以发送请求</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

XMLHttpRequest <span class="token operator">=</span> <span class="token constant">XML</span>

axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">)</span> <span class="token comment">// 可以看到上面的 console.log()</span>
</code></pre></div><h3 id="如何判断该函数是不是原生函数"><a href="#如何判断该函数是不是原生函数" aria-hidden="true" class="header-anchor">#</a> 如何判断该函数是不是原生函数</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">isNative</span> <span class="token punctuation">(</span>Ctor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">typeof</span> Ctor <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span> <span class="token regex">/native code/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>Ctor<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="十一月"><a href="#十一月" aria-hidden="true" class="header-anchor">#</a> 十一月</h2> <h3 id="text-overflow-ellipsis-不生效的原因？"><a href="#text-overflow-ellipsis-不生效的原因？" aria-hidden="true" class="header-anchor">#</a> text-overflow: ellipsis 不生效的原因？</h3> <p>必须是块级元素，<code>display: flex</code> 影响生效的原因之一，</p> <p>根据<code>MDN文档</code>，</p> <blockquote><p>这个属性只对那些在块级元素溢出的内容有效，但是必须要与块级元素内联(inline)方向一致（举个反例：内容在盒子的下方溢出。此时就不会生效）。文本可能在以下情况下溢出：当其因为某种原因而无法换行(例子：设置了&quot;white-space:nowrap&quot;)，或者一个单词因为太长而不能合理地被安置(fit)。</p></blockquote> <p>参考<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/text-overflow" target="_blank" rel="noopener noreferrer">这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="把数组某个值快速置后的方法"><a href="#把数组某个值快速置后的方法" aria-hidden="true" class="header-anchor">#</a> 把数组某个值快速置后的方法</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span>arr<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fn</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// arr =&gt; [1,3,2];</span>
</code></pre></div><h3 id="为什么-为-true"><a href="#为什么-为-true" aria-hidden="true" class="header-anchor">#</a> 为什么 [] == ![] 为 true ?</h3> <p><code>![]</code>实际为<code>false</code>，所以比较的是 <code>[] == false</code>，为什么 <code>[] == false</code> 为 <code>true</code>？</p> <p>== 会触发隐式转换，有个准则，看一个表格：</p> <table><thead><tr><th>类型(x)</th> <th>类型(y)</th> <th>结果</th></tr></thead> <tbody><tr><td>null</td> <td>undefined</td> <td>true</td></tr> <tr><td>undefined</td> <td>null</td> <td>true</td></tr> <tr><td>数字</td> <td>字符串</td> <td>x == toNumber(y)</td></tr> <tr><td>字符串</td> <td>数字</td> <td>toNumber(x) == y</td></tr> <tr><td>布尔值</td> <td>任何类型</td> <td>toNumber(x) == y</td></tr> <tr><td>任何类型</td> <td>布尔值</td> <td>x == toNumber(y)</td></tr> <tr><td>字符串或数字</td> <td>对象</td> <td>x == toPrimitive(y)</td></tr> <tr><td>对象</td> <td>字符串或数字</td> <td>toPrimitive(x) == y</td></tr></tbody></table> <p>来看下 <code>[] == false</code> 的判断流程：</p> <p>1、根据表格，<strong>任何类型与布尔值</strong>比较，先让<code>false</code>转成<code>number</code>，Number(fasle) =&gt; 0</p> <p>2、来到了<code>[] == 0</code>比较，即<strong>对象和数字比较</strong>，toPrimitive([]) =&gt; [].valueOf() -&gt; 返回的是原始类型 ？[].valueOf() : [].valueOf().toString()</p> <p>3、[].valueOf().toString() -&gt; &quot;&quot;</p> <p>4、来到了<code>&quot;&quot; == 0</code>比较，即<strong>字符串和数字比较</strong>，Number(&quot;&quot;) -&gt; 0</p> <p>5、所以，<code>0 == 0</code> 还不是 true 嘛</p> <h3 id="vue2-x-响应式实现观察者模式精简版"><a href="#vue2-x-响应式实现观察者模式精简版" aria-hidden="true" class="header-anchor">#</a> vue2.x 响应式实现观察者模式精简版</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> target <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 指向 watcher</span>

<span class="token keyword">const</span> dep <span class="token operator">=</span> <span class="token punctuation">{</span>
  subs<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 收集依赖</span>
  <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>sub <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      sub<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">addSubs</span><span class="token punctuation">(</span>watcher<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>watcher<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">depend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      target<span class="token punctuation">.</span><span class="token function">addDep</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// watcher 分为三种</span>
<span class="token comment">// render-watcher、computed-watcher、user-watcher</span>
<span class="token keyword">const</span> watcher <span class="token operator">=</span> <span class="token punctuation">{</span>
  deps<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'updated'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">addDep</span><span class="token punctuation">(</span>dep<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>deps<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>dep<span class="token punctuation">)</span><span class="token punctuation">;</span>
    dep<span class="token punctuation">.</span><span class="token function">addSubs</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

target <span class="token operator">=</span> watcher<span class="token punctuation">;</span>
dep<span class="token punctuation">.</span><span class="token function">depend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 收集依赖</span>
dep<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 派发更新</span>
</code></pre></div><h2 id="十二月"><a href="#十二月" aria-hidden="true" class="header-anchor">#</a> 十二月</h2> <h3 id="vue-jsx-click-native-写法"><a href="#vue-jsx-click-native-写法" aria-hidden="true" class="header-anchor">#</a> vue jsx @click.native 写法</h3> <p>写法一：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>comp vOn<span class="token punctuation">:</span>click_native<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>xxx<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>comp<span class="token operator">&gt;</span>
</code></pre></div><p>写法二：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>comp nativeOnClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>xxx<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>comp<span class="token operator">&gt;</span>
</code></pre></div><h3 id="vue-router3-1-push-相同路由报错的解决方法"><a href="#vue-router3-1-push-相同路由报错的解决方法" aria-hidden="true" class="header-anchor">#</a> vue-router3.1 push 相同路由报错的解决方法</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> originalPush <span class="token operator">=</span> VueRouter<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>push<span class="token punctuation">;</span>
VueRouter<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">push</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">push</span><span class="token punctuation">(</span>location<span class="token punctuation">,</span> onResolve<span class="token punctuation">,</span> onReject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>onResolve <span class="token operator">||</span> onReject<span class="token punctuation">)</span>
    <span class="token keyword">return</span> originalPush<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> location<span class="token punctuation">,</span> onResolve<span class="token punctuation">,</span> onReject<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> originalPush<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> location<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="关于ajax发送cookie到服务端发生跨域的问题"><a href="#关于ajax发送cookie到服务端发生跨域的问题" aria-hidden="true" class="header-anchor">#</a> 关于ajax发送cookie到服务端发生跨域的问题</h3> <p>如果前端要发送cookie到服务端，需要把xhr的<strong>withCredentials</strong>设置为true：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'http://example.com/'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span>withCredentials <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>服务端需要把响应头的的<strong>Access-Control-Allow-Credentials</strong>设置为true，比如<code>koa2-cors</code>可以这么设：</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  credentials<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这种可以在同源中实现cookie传递，如果非同源，会有跨域问题。如何解决？</p> <blockquote><p>Access-Control-Allow-Origin 不能设为星号，必须指定明确的、与请求网页一致的域名。</p></blockquote> <p>平常后端解决跨域一般都是把<code>Access-Control-Allow-Origin</code>设为<code>*</code>，但是要传cookie的话，就需要后端动态读取请求域名然后动态设置了。</p> <h3 id="encodeuri-和-encodeuricomponent-的区别"><a href="#encodeuri-和-encodeuricomponent-的区别" aria-hidden="true" class="header-anchor">#</a> encodeURI() 和 encodeURIComponent() 的区别</h3> <ul><li>encodeURI</li></ul> <blockquote><p>encodeURI 函数可把字符串作为 URI 进行编码</p></blockquote> <p>encodeURI() 函数不会对 ASCII 字母和数字进行编码，也不会对这些 ASCII 标点符号进行编码: - _ . ! ~ * ' ( ) 。</p> <p>该方法的目的是对 URI 进行完整的编码，因此对以下在 URI 中具有特殊含义的 ASCII 标点符号，encodeURI() 函数是不会进行转义的：<strong>;/?😡&amp;=+$,#</strong></p> <p>如果 URI 组件中含有分隔符，比如 ? 和 #，则应当使用 encodeURIComponent() 方法分别对各组件进行编码。</p> <ul><li>encodeURIComponent</li></ul> <blockquote><p>encodeURIComponent() 函数可把字符串作为 URI 组件进行编码</p></blockquote> <p>该方法不会对 ASCII 字母和数字进行编码，也不会对这些 ASCII 标点符号进行编码： - _ . ! ~ * ' ( ) 。</p> <p>其他字符（比如 ：;/?😡&amp;=+$,# 这些用于分隔 URI 组件的标点符号），都是由一个或多个十六进制的转义序列替换的。</p> <p>摘自 <a href="https://www.w3school.com.cn/jsref/jsref_encodeURIComponent.asp" target="_blank" rel="noopener noreferrer">w3c<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 里的一段话：</p> <blockquote><p>请注意 encodeURIComponent() 函数 与 encodeURI() 函数的区别之处，前者假定它的参数是 URI 的一部分（比如协议、主机名、路径或查询字符串）。因此 encodeURIComponent() 函数将转义用于分隔 URI 各个部分的标点符号。</p></blockquote> <p>比如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> uri <span class="token operator">=</span> <span class="token string">'http://shooterblog.site/2019/07/09/【Vue源码学习系列】解读数据响应式实现原理/'</span>

<span class="token function">encodeURI</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span> <span class="token comment">// http://shooterblog.site/2019/07/09/%E3%80%90Vue%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%E3%80%91%E8%A7%A3%E8%AF%BB%E6%95%B0%E6%8D%AE%E5%93%8D%E5%BA%94%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/</span>

<span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span> <span class="token comment">// http%3A%2F%2Fshooterblog.site%2F2019%2F07%2F09%2F%E3%80%90Vue%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%E3%80%91%E8%A7%A3%E8%AF%BB%E6%95%B0%E6%8D%AE%E5%93%8D%E5%BA%94%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%2F</span>
</code></pre></div><p>encodeURI() 和 encodeURIComponent() 对应的解码方法是 decodeURI() 和 decodeURIComponent()</p> <div class="to-top"><svg t="1547627942927" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1955" xmlns:xlink="http://www.w3.org/1999/xlink" width="64" height="64" class="icon"><path d="M752.736 431.063C757.159 140.575 520.41 8.97 504.518 0.41V0l-0.45 0.205-0.41-0.205v0.41c-15.934 8.56-252.723 140.165-248.259 430.653-48.21 31.457-98.713 87.368-90.685 184.074 8.028 96.666 101.007 160.768 136.601 157.287 35.595-3.482 25.232-30.31 25.232-30.31l12.206-50.095s52.47 80.569 69.304 80.528c15.114-1.23 87-0.123 95.6 0h0.82c8.602-0.123 80.486-1.23 95.6 0 16.794 0 69.305-80.528 69.305-80.528l12.165 50.094s-10.322 26.83 25.272 30.31c35.595 3.482 128.574-60.62 136.602-157.286 8.028-96.665-42.475-152.617-90.685-184.074z m-248.669-4.26c-6.758-0.123-94.781-3.359-102.891-107.192 2.95-98.714 95.97-107.438 102.891-107.93 6.964 0.492 99.943 9.216 102.892 107.93-8.11 103.833-96.174 107.07-102.892 107.192z m-52.019 500.531c0 11.838-9.42 21.382-21.012 21.382a21.217 21.217 0 0 1-21.054-21.34V821.74c0-11.797 9.421-21.382 21.054-21.382 11.591 0 21.012 9.585 21.012 21.382v105.635z m77.333 57.222a21.504 21.504 0 0 1-21.34 21.626 21.504 21.504 0 0 1-21.34-21.626V827.474c0-11.96 9.543-21.668 21.299-21.668 11.796 0 21.38 9.708 21.38 21.668v157.082z m71.147-82.043c0 11.796-9.42 21.34-21.053 21.34a21.217 21.217 0 0 1-21.013-21.34v-75.367c0-11.755 9.421-21.299 21.013-21.299 11.632 0 21.053 9.544 21.053 21.3v75.366z" fill="#3eaf7c" p-id="1956"></path></svg></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/2/2020, 10:03:24 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Notebook/dailyRecord/2020.html" class="prev">
        2020
      </a></span> <span class="next"><a href="/Notebook/dailyRecord/2018.html">
        2018
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Notebook/assets/js/app.51035dcd.js" defer></script><script src="/Notebook/assets/js/21.b8066a1d.js" defer></script><script src="/Notebook/assets/js/6.f1072f55.js" defer></script><script src="/Notebook/assets/js/19.17673ac2.js" defer></script>
  </body>
</html>
