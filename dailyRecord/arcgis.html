<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>arcgis js api è®°å½• | RJW&#39;s Notebook</title>
    <meta name="generator" content="VuePress 1.5.3">
    <link rel="icon" href="/Notebook/images/logo.png">
    <meta name="description" content="ğŸ“æ¯å¤©è®°å½•ä¸€ç‚¹ç‚¹">
    <link rel="preload" href="/Notebook/assets/css/0.styles.2568425a.css" as="style"><link rel="preload" href="/Notebook/assets/js/app.51035dcd.js" as="script"><link rel="preload" href="/Notebook/assets/js/21.b8066a1d.js" as="script"><link rel="preload" href="/Notebook/assets/js/11.bcd53a24.js" as="script"><link rel="preload" href="/Notebook/assets/js/19.17673ac2.js" as="script"><link rel="prefetch" href="/Notebook/assets/js/2.f187326d.js"><link rel="prefetch" href="/Notebook/assets/js/3.c107e9cc.js"><link rel="prefetch" href="/Notebook/assets/js/4.195f4b4c.js"><link rel="prefetch" href="/Notebook/assets/js/5.c6e81d81.js"><link rel="prefetch" href="/Notebook/assets/js/6.f1072f55.js"><link rel="prefetch" href="/Notebook/assets/js/7.d4af47ef.js"><link rel="prefetch" href="/Notebook/assets/js/8.c5c9a92a.js"><link rel="prefetch" href="/Notebook/assets/js/9.6d199ed1.js"><link rel="prefetch" href="/Notebook/assets/js/10.88896875.js"><link rel="prefetch" href="/Notebook/assets/js/12.1b5a4e8c.js"><link rel="prefetch" href="/Notebook/assets/js/13.356cc3d0.js"><link rel="prefetch" href="/Notebook/assets/js/14.2c74c350.js"><link rel="prefetch" href="/Notebook/assets/js/15.b864e6b5.js"><link rel="prefetch" href="/Notebook/assets/js/16.30e2be76.js"><link rel="prefetch" href="/Notebook/assets/js/17.beaf0e2c.js"><link rel="prefetch" href="/Notebook/assets/js/18.13b949a3.js"><link rel="prefetch" href="/Notebook/assets/js/20.5e336d91.js">
    <link rel="stylesheet" href="/Notebook/assets/css/0.styles.2568425a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Notebook/" class="home-link router-link-active"><!----> <span class="site-name">RJW's Notebook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Notebook/dailyRecord/" class="nav-link router-link-active">
  ğŸ“æ—¥å¸¸è®°å½•
</a></div><div class="nav-item"><a href="/Notebook/bookmark/" class="nav-link">
  ğŸ·ä¹¦ç­¾æ•´ç†
</a></div><div class="nav-item"><a href="/Notebook/lint/" class="nav-link">
  âœ”ï¸ç¼–ç è§„èŒƒ&amp;ååŒå¼€å‘
</a></div><div class="nav-item"><a href="http://shooterblog.site/Learn-JS-Demo/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ“–çŸ¥è¯†è„‘å›¾
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://shooterblog.site" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ”§ä¸ªäººåšå®¢
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/shooterRao" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ”—Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Notebook/dailyRecord/" class="nav-link router-link-active">
  ğŸ“æ—¥å¸¸è®°å½•
</a></div><div class="nav-item"><a href="/Notebook/bookmark/" class="nav-link">
  ğŸ·ä¹¦ç­¾æ•´ç†
</a></div><div class="nav-item"><a href="/Notebook/lint/" class="nav-link">
  âœ”ï¸ç¼–ç è§„èŒƒ&amp;ååŒå¼€å‘
</a></div><div class="nav-item"><a href="http://shooterblog.site/Learn-JS-Demo/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ“–çŸ¥è¯†è„‘å›¾
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://shooterblog.site" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ”§ä¸ªäººåšå®¢
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/shooterRao" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ”—Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>æ—¥å¸¸è®°å½•</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Notebook/dailyRecord/" aria-current="page" class="sidebar-link">2022</a></li><li><a href="/Notebook/dailyRecord/2021.html" class="sidebar-link">2021</a></li><li><a href="/Notebook/dailyRecord/2020.html" class="sidebar-link">2020</a></li><li><a href="/Notebook/dailyRecord/2019.html" class="sidebar-link">2019</a></li><li><a href="/Notebook/dailyRecord/2018.html" class="sidebar-link">2018</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>interview</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Notebook/dailyRecord/interview.html" class="sidebar-link">é¢è¯•å¤ä¹ </a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="arcgis-js-api-è®°å½•"><a href="#arcgis-js-api-è®°å½•" aria-hidden="true" class="header-anchor">#</a> arcgis js api è®°å½•</h1> <h2 id="map"><a href="#map" aria-hidden="true" class="header-anchor">#</a> Map</h2> <p>æ‰€æœ‰ç±»éƒ½æœ‰å…±ç”¨ map å¯¹è±¡</p> <p>map: &quot;esri/map&quot;
centerAndZoom (point,çº§åˆ«);
toMap ï¼ˆè½¬ä¸ºåœ°å›¾åæ ‡ï¼‰
toScreen ï¼ˆè½¬ä¸ºå±å¹•åæ ‡ï¼‰</p> <p>Graphic symbol attributes</p> <p>Querytask query
IdentifyTask
Buffer
Geometryservices..</p> <h2 id="æŸ¥è¯¢æœåŠ¡åœ°å€"><a href="#æŸ¥è¯¢æœåŠ¡åœ°å€" aria-hidden="true" class="header-anchor">#</a> æŸ¥è¯¢æœåŠ¡åœ°å€</h2> <p>ä¸€èˆ¬ä¸ºé™æ€æœåŠ¡+'/0'</p> <h2 id="æ ¹æ®-id-è·å–-layer"><a href="#æ ¹æ®-id-è·å–-layer" aria-hidden="true" class="header-anchor">#</a> æ ¹æ® id è·å– layer</h2> <p>this.map.getLayer(layerobj.serviceuid)
this.map.layerIds (åœ°å›¾å·²åŠ è½½çš„å›¾å±‚ ID åˆ—è¡¨)</p> <h2 id="createsymbol"><a href="#createsymbol" aria-hidden="true" class="header-anchor">#</a> createSymbol</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createMarkerSymbol</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> markerSymbol <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleMarkerSymbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  markerSymbol<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
  markerSymbol<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">dojo<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  markerSymbol<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  markerSymbol<span class="token punctuation">.</span><span class="token function">setOutline</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> markerSymbol<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" aria-hidden="true" class="header-anchor">#</a> æŸ¥è¯¢</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> query <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> queryUrl <span class="token operator">=</span>â€œ<span class="token constant">XXX</span><span class="token operator">/</span><span class="token number">0</span>&quot;<span class="token punctuation">;</span>
<span class="token keyword">var</span> queryTask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryTask</span><span class="token punctuation">(</span>queryUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> where <span class="token operator">=</span> xxx<span class="token punctuation">;</span>
query<span class="token punctuation">.</span>spatialRel <span class="token operator">=</span> <span class="token string">&quot;sriSpatialRelIntersects&quot;</span><span class="token punctuation">;</span>
query<span class="token punctuation">.</span>where <span class="token operator">=</span> <span class="token string">&quot;NAME like '%&quot;</span> <span class="token operator">+</span> where <span class="token operator">+</span> <span class="token string">&quot;%'&quot;</span><span class="token punctuation">;</span>
query<span class="token punctuation">.</span>returnGeometry <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment">// è¿”å›åœ°ç†ä¿¡æ¯</span>
query<span class="token punctuation">.</span>outFields <span class="token operator">=</span> <span class="token punctuation">[</span>&quot;<span class="token operator">*</span>â€<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// æ‰€æœ‰å­—æ®µ</span>
queryTask<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>Query<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="æŸ¥å‡ºç»“æœï¼Œè·å–åœ°ç†ä¿¡æ¯"><a href="#æŸ¥å‡ºç»“æœï¼Œè·å–åœ°ç†ä¿¡æ¯" aria-hidden="true" class="header-anchor">#</a> æŸ¥å‡ºç»“æœï¼Œè·å–åœ°ç†ä¿¡æ¯</h2> <div class="language-js extra-class"><pre class="language-js"><code>resultGraphic<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span><span class="token function">getExtent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="è·å–åœ°ç†ä¿¡æ¯ä¸­å¿ƒç‚¹"><a href="#è·å–åœ°ç†ä¿¡æ¯ä¸­å¿ƒç‚¹" aria-hidden="true" class="header-anchor">#</a> è·å–åœ°ç†ä¿¡æ¯ä¸­å¿ƒç‚¹</h2> <div class="language-js extra-class"><pre class="language-js"><code>resultGraphic<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span><span class="token function">getExtent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="æŸ¥è¯¢-2"><a href="#æŸ¥è¯¢-2" aria-hidden="true" class="header-anchor">#</a> æŸ¥è¯¢</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æ¨¡ç³ŠæŸ¥è¯¢</span>
query<span class="token punctuation">.</span>where <span class="token operator">=</span> <span class="token string">&quot;NAME like '%&quot;</span> <span class="token operator">+</span> where <span class="token operator">+</span> <span class="token string">&quot;%â€™&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// ç²¾ç¡®æŸ¥è¯¢</span>
query<span class="token punctuation">.</span>where <span class="token operator">=</span> <span class="token string">&quot;NAME =&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;\'&quot;</span> <span class="token operator">+</span> text <span class="token operator">+</span> <span class="token string">&quot;\'&quot;</span><span class="token punctuation">;</span>
query<span class="token punctuation">.</span>where <span class="token operator">=</span><span class="token string">&quot;CASETYPE = 'â€ + name + &quot;</span><span class="token string">' and SECTION-NAME = '</span>â€ <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>branchName <span class="token operator">+</span> <span class="token string">&quot;' &quot;</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_2018-06-20"><a href="#_2018-06-20" aria-hidden="true" class="header-anchor">#</a> 2018/06/20</h2> <p>1.åŒ id çš„ graphicLayer å›¾å±‚åªèƒ½æ·»åŠ ä¸€æ¬¡ï¼Œä¸èƒ½é‡å¤æ·»åŠ ï¼Œä¸ç„¶æ— æ³•æ·»åŠ  graphic åˆ°è¯¥ graphicLayer ä¸Š</p> <p>2.å…³äºå›¾å±‚æ”¾å¤§(å®šä½åˆ°æŒ‡å®šåæ ‡)ï¼Œåæ ‡åˆæ˜¯ç»è¿‡ this.map.toMap(screen çš„)ï¼Œç„¶åå‡ºç°åç§»çš„é—®é¢˜ï¼Œè§£å†³åŠæ³•æ˜¯å…ˆè¿›è¡Œå›¾å±‚æ”¾å¤§ï¼Œç„¶åå†è¿›è¡Œåæ ‡è½¬æ¢ï¼Œæœ€åè¿›è¡Œå®šä½</p> <p>3.å…³äºå®šä½å’Œ infoWindow show æ—¶ï¼Œæ§åˆ¶å°ä¼šå‡ºç°ä¸€å †æŠ¥é”™ä¿¡æ¯ï¼ŒåŸå› æ˜¯åœ°å›¾å®šä½åˆ°æŸä¸ªç‚¹æ—¶ï¼Œå®šä½æ˜¯å¼‚æ­¥çš„ï¼Œå›¾å±‚è¿˜æ˜¯ç§»åŠ¨ï¼ŒinfoWindow çš„ show æ–¹æ³•æ˜¯åŒæ­¥çš„ï¼Œå›¾å±‚æœªç§»åŠ¨å®Œæˆç›´æ¥æ‰§è¡Œ infoWindow çš„ show æ–¹æ³•ä¼šæ‰¾ä¸åˆ°æŒ‡å®šçš„ç‚¹ã€‚è§£å†³åŠæ³•æ˜¯ this.map.centerAt(xxx).then(function(){ infoWindow.show() })</p> <h2 id="é¢ç§¯è®¡ç®—"><a href="#é¢ç§¯è®¡ç®—" aria-hidden="true" class="header-anchor">#</a> é¢ç§¯è®¡ç®—</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">calculateAreaByGeometry</span><span class="token punctuation">(</span>geometries<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> areasAndLengthParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AreasAndLengthsParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  areasAndLengthParams<span class="token punctuation">.</span>lengthUnit <span class="token operator">=</span> GeometryService<span class="token punctuation">.</span><span class="token constant">UNIT_METER</span><span class="token punctuation">;</span>
  areasAndLengthParams<span class="token punctuation">.</span>areaUnit <span class="token operator">=</span> GeometryService<span class="token punctuation">.</span><span class="token constant">UNIT_SQUARE_METERS</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>_geoService<span class="token punctuation">.</span><span class="token function">simplify</span><span class="token punctuation">(</span><span class="token punctuation">[</span>geometries<span class="token punctuation">]</span><span class="token punctuation">,</span>lang<span class="token punctuation">.</span><span class="token function">hitch</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">functio</span> <span class="token punctuation">(</span>simplifiedGeometries<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      areasAndLengthParams<span class="token punctuation">.</span>polygons <span class="token operator">=</span> simplifiedGeometries<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>_geoService<span class="token punctuation">.</span><span class="token function">areasAndLengths</span><span class="token punctuation">(</span>areasAndLengthParams<span class="token punctuation">,</span> lang<span class="token punctuation">.</span><span class="token function">hitch</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>measurements<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;è®¡ç®—ï¼š&quot;</span><span class="token operator">+</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>measurements<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_originArea <span class="token operator">=</span> measurements<span class="token punctuation">.</span>areas<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>LandArea<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_originArea<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>LandArea<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_originArea<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="æ ¼å¼åŒ–è¿”å›æ•°æ®æ ¼å¼-cad"><a href="#æ ¼å¼åŒ–è¿”å›æ•°æ®æ ¼å¼-cad" aria-hidden="true" class="header-anchor">#</a> æ ¼å¼åŒ–è¿”å›æ•°æ®æ ¼å¼ cad</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">formateCadData</span><span class="token punctuation">(</span>rendererInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> rendererInfo<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;Annotation&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">var</span> _Annotation <span class="token operator">=</span> key<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;MultiPatch&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">var</span> _Multipatch <span class="token operator">=</span> key<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;Point&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">var</span> _Point <span class="token operator">=</span> key<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;Polygon&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">var</span> _Polygon <span class="token operator">=</span> key<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;Polyline&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">var</span> _Polyline <span class="token operator">=</span> key<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>_tempSOEArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>_Annotation <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> _Annotation <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>_tempSOEArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>key<span class="token punctuation">:</span>_Annotation<span class="token punctuation">,</span>label<span class="token punctuation">:</span><span class="token string">&quot;Annotation&quot;</span><span class="token punctuation">,</span>renderer<span class="token punctuation">:</span>rendererInfo<span class="token punctuation">[</span>_Annotation<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>_Point <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> _Point <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>_tempSOEArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>key<span class="token punctuation">:</span>_Point<span class="token punctuation">,</span>label<span class="token punctuation">:</span><span class="token string">&quot;Point&quot;</span><span class="token punctuation">,</span>renderer<span class="token punctuation">:</span>rendererInfo<span class="token punctuation">[</span>_Point<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>_Multipatch <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> _Multipatch <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>_tempSOEArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>key<span class="token punctuation">:</span>_Multipatch<span class="token punctuation">,</span>label<span class="token punctuation">:</span><span class="token string">&quot;MultiPatch&quot;</span><span class="token punctuation">,</span>renderer<span class="token punctuation">:</span>rendererInfo<span class="token punctuation">[</span>_Multipatch<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>_Polygon <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> _Polygon <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>_tempSOEArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>key<span class="token punctuation">:</span>_Polygon<span class="token punctuation">,</span>label<span class="token punctuation">:</span><span class="token string">&quot;Polygon&quot;</span><span class="token punctuation">,</span>renderer<span class="token punctuation">:</span>rendererInfo<span class="token punctuation">[</span>_Polygon<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>_Polyline <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> _Polyline <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>_tempSOEArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>key<span class="token punctuation">:</span>_Polyline<span class="token punctuation">,</span>label<span class="token punctuation">:</span><span class="token string">&quot;Polyline&quot;</span><span class="token punctuation">,</span>renderer<span class="token punctuation">:</span>rendererInfo<span class="token punctuation">[</span>_Polyline<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//console.log(this._tempSOEArray);</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="ç”Ÿæˆæ°”æ³¡"><a href="#ç”Ÿæˆæ°”æ³¡" aria-hidden="true" class="header-anchor">#</a> ç”Ÿæˆæ°”æ³¡</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">_createMarkerSymbol</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> markerSymbol <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleMarkerSymbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  markerSymbol<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
  markerSymbol<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">dojo<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  markerSymbol<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  markerSymbol<span class="token punctuation">.</span><span class="token function">setOutline</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> markerSymbol<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> bubblePath <span class="token operator">=</span>
  <span class="token string">&quot;M112.383743,306.206395 C205.990914,190.501802 240.139288,110.391573 214.974178,65.98601 C191.75978,25.0226106 152.205437,0.518809731 112.001211,0.890603622 C72.6760715,1.25426804 33.6638005,25.2983572 8.95967556,65.9989251 C-17.1771425,109.059885 17.2454444,189.168363 112.383743,306.206395 Z&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> initColor <span class="token operator">=</span> <span class="token string">&quot;#0084ff&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// ç”Ÿæˆæ°”æ³¡symbol</span>
<span class="token keyword">var</span> bubbleSymbol <span class="token operator">=</span> <span class="token function">_createMarkerSymbol</span><span class="token punctuation">(</span>bubblePath<span class="token punctuation">,</span> initColor<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// é€šç”¨symbolæ ·å¼</span>
<span class="token keyword">var</span> polygonSys <span class="token operator">=</span> <span class="token punctuation">{</span>
  style<span class="token punctuation">:</span> <span class="token string">&quot;esriSFSSolid&quot;</span><span class="token punctuation">,</span>
  color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">79</span><span class="token punctuation">,</span> <span class="token number">129</span><span class="token punctuation">,</span> <span class="token number">189</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  type<span class="token punctuation">:</span> <span class="token string">&quot;esriSFS&quot;</span><span class="token punctuation">,</span>
  outline<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    style<span class="token punctuation">:</span> <span class="token string">&quot;esriSLSSolid&quot;</span><span class="token punctuation">,</span>
    color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">125</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    width<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    type<span class="token punctuation">:</span> <span class="token string">&quot;esriSLS&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> pointSys <span class="token operator">=</span> <span class="token punctuation">{</span>
  style<span class="token punctuation">:</span> <span class="token string">&quot;esriSMSCircle&quot;</span><span class="token punctuation">,</span>
  color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> <span class="token string">&quot;Circle&quot;</span><span class="token punctuation">,</span>
  outline<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    width<span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  type<span class="token punctuation">:</span> <span class="token string">&quot;esriSMS&quot;</span><span class="token punctuation">,</span>
  size<span class="token punctuation">:</span> <span class="token number">18</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> lineSys <span class="token operator">=</span> <span class="token punctuation">{</span>
  style<span class="token punctuation">:</span> <span class="token string">&quot;esriSLSSolid&quot;</span><span class="token punctuation">,</span>
  color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  width<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> <span class="token string">&quot;Red 1&quot;</span><span class="token punctuation">,</span>
  type<span class="token punctuation">:</span> <span class="token string">&quot;esriSLS&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>pointSymbol<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>pointSymbol <span class="token operator">=</span> jsonUtils<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>pointSys<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>polylineSymbol<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>polylineSymbol <span class="token operator">=</span> jsonUtils<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>lineSys<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>polygonSymbol<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>polygonSymbol <span class="token operator">=</span> jsonUtils<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>polygonSys<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="åŠ å…¥å›¾å±‚"><a href="#åŠ å…¥å›¾å±‚" aria-hidden="true" class="header-anchor">#</a> åŠ å…¥å›¾å±‚</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>identifyGraphicLayer<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>currentGra<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ä¸€é—ªä¸€é—ªgraphic</span>
dgpUtils<span class="token punctuation">.</span>featureAction<span class="token punctuation">.</span><span class="token function">flash</span><span class="token punctuation">(</span><span class="token punctuation">[</span>currentGra<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>identifyGraphicLayer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å®šä½</span>
dgpUtils<span class="token punctuation">.</span>featureAction<span class="token punctuation">.</span><span class="token function">zoomTo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">,</span> <span class="token punctuation">[</span>currentGra<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> extentFactor<span class="token punctuation">:</span> <span class="token string">&quot;2&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">setExtent</span><span class="token punctuation">(</span>geometry<span class="token punctuation">.</span><span class="token function">getExtent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">expand</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="å¯¼å‡º-excel"><a href="#å¯¼å‡º-excel" aria-hidden="true" class="header-anchor">#</a> å¯¼å‡º excel</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">exportToExecl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">var</span> filename <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>exportData<span class="token punctuation">.</span>layerName<span class="token punctuation">,</span>
tableId <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>baseClass <span class="token operator">+</span> <span class="token string">'-table'</span><span class="token punctuation">,</span>
tableDataSource <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>exportData<span class="token punctuation">.</span>feature<span class="token punctuation">.</span>attributes<span class="token punctuation">;</span>
<span class="token comment">// console.log(this.exportData);</span>
<span class="token keyword">var</span> table <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>tableId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>table<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  table <span class="token operator">=</span> domCon<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">'table'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token string">'id'</span><span class="token punctuation">:</span> tableId<span class="token punctuation">,</span>
  <span class="token string">'style'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">'display'</span><span class="token punctuation">:</span> <span class="token string">'none'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>domNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>exportTable <span class="token operator">=</span> table<span class="token punctuation">;</span>
<span class="token keyword">var</span> thead <span class="token operator">=</span> domCon<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">'thead'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> table<span class="token punctuation">)</span><span class="token punctuation">,</span>
theadTr <span class="token operator">=</span> domCon<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">'tr'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> thead<span class="token punctuation">)</span><span class="token punctuation">,</span>
tbody <span class="token operator">=</span> domCon<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">'tbody'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> table<span class="token punctuation">)</span><span class="token punctuation">,</span>
tbodyTr <span class="token operator">=</span> domCon<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">'tr'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> tbody<span class="token punctuation">)</span><span class="token punctuation">;</span>
array<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>tableDataSource<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  domCon<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">'th'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> innerHTML<span class="token punctuation">:</span> key <span class="token punctuation">}</span><span class="token punctuation">,</span> theadTr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> value <span class="token operator">=</span> lang<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span>tableDataSource<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  domCon<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">'td'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> innerHTML<span class="token punctuation">:</span> value <span class="token punctuation">}</span><span class="token punctuation">,</span> tbodyTr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">ExportToExcel</span><span class="token punctuation">(</span><span class="token punctuation">[</span>tableId<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>filename<span class="token punctuation">]</span><span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
  domCon<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="i-æŸ¥è¯¢"><a href="#i-æŸ¥è¯¢" aria-hidden="true" class="header-anchor">#</a> I æŸ¥è¯¢</h2> <div class="language-js extra-class"><pre class="language-js"><code>_IdentifyOneByOne<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>geometry<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">var</span> QueryConfig <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span>queryconfig<span class="token punctuation">;</span>
<span class="token keyword">var</span> layerItem <span class="token operator">=</span> QueryConfig<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> identifyTask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IdentifyTask</span><span class="token punctuation">(</span>layerItem<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> identifyParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IdentifyParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
identifyParams<span class="token punctuation">.</span>tolerance <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
identifyParams<span class="token punctuation">.</span>returnGeometry <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
identifyParams<span class="token punctuation">.</span>spatialReference <span class="token operator">=</span> _this<span class="token punctuation">.</span>map<span class="token punctuation">.</span>extent<span class="token punctuation">.</span>spatialReference<span class="token punctuation">;</span>
identifyParams<span class="token punctuation">.</span>geometry <span class="token operator">=</span> geometry<span class="token punctuation">;</span>
<span class="token comment">// layerIds â€˜[1,2]â€˜ ä¼ å…¥å›¾å±‚Id</span>
identifyParams<span class="token punctuation">.</span>layerIds <span class="token operator">=</span> layerItem<span class="token punctuation">.</span>queryLayers<span class="token punctuation">;</span>
identifyParams<span class="token punctuation">.</span>layerOption <span class="token operator">=</span> IdentifyParameters<span class="token punctuation">.</span><span class="token constant">LAYER_OPTION_ALL</span><span class="token punctuation">;</span>
identifyParams<span class="token punctuation">.</span>mapExtent <span class="token operator">=</span> _this<span class="token punctuation">.</span>map<span class="token punctuation">.</span>extent<span class="token punctuation">;</span>
identifyTask<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>identifyParams<span class="token punctuation">,</span> lang<span class="token punctuation">.</span><span class="token function">hitch</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>results<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  _this<span class="token punctuation">.</span>isResult <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  data<span class="token punctuation">.</span>results <span class="token operator">=</span> results<span class="token punctuation">;</span>
  data<span class="token punctuation">.</span>layerItem <span class="token operator">=</span> layerItem<span class="token punctuation">;</span>
  _this<span class="token punctuation">.</span><span class="token function">_dataClassification</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> QueryConfig<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  _this<span class="token punctuation">.</span><span class="token function">_IdentifyOneByOne</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  _this<span class="token punctuation">.</span><span class="token function">_showQueryResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="ç»˜åˆ¶ç¼“å†²åŒº"><a href="#ç»˜åˆ¶ç¼“å†²åŒº" aria-hidden="true" class="header-anchor">#</a> ç»˜åˆ¶ç¼“å†²åŒº</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">doBuffer</span><span class="token punctuation">(</span>bufferRange<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//ç¼“å†²åŒºæŸ¥è¯¢è¿”å›æ–°çš„geometry</span>
<span class="token keyword">var</span> bufferParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> geometry <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_beforeBufferGeometry<span class="token punctuation">;</span>
bufferParams<span class="token punctuation">.</span>distances <span class="token operator">=</span> <span class="token punctuation">[</span>bufferRange<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// è·ç¦»</span>
bufferParams<span class="token punctuation">.</span>outSpatialReference <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">.</span>spatialReference<span class="token punctuation">;</span>
bufferParams<span class="token punctuation">.</span>geometries <span class="token operator">=</span> <span class="token punctuation">[</span>geometry<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// geometry</span>
bufferParams<span class="token punctuation">.</span>unit <span class="token operator">=</span> GeometryService<span class="token punctuation">.</span><span class="token constant">UNIT_METER</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>_geoService<span class="token punctuation">.</span><span class="token function">buffer</span><span class="token punctuation">(</span>bufferParams<span class="token punctuation">,</span> lang<span class="token punctuation">.</span><span class="token function">hitch</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>results<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> bufferGeometry <span class="token operator">=</span> results<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_showBufferGeometry</span><span class="token punctuation">(</span>bufferGeometry<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å±•ç¤ºç¼“å†²åŒºåŸŸ</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_bufferGeometry <span class="token operator">=</span> bufferGeometry<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="è·å–æ‰“å¼€çš„ä¸“é¢˜"><a href="#è·å–æ‰“å¼€çš„ä¸“é¢˜" aria-hidden="true" class="header-anchor">#</a> è·å–æ‰“å¼€çš„ä¸“é¢˜</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>topicManager<span class="token punctuation">.</span><span class="token function">getOpenedTopics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="å…³äºè°ƒç”¨-soe-æœåŠ¡ï¼Œå¦‚ä½•ä¼ -ringsï¼Ÿ"><a href="#å…³äºè°ƒç”¨-soe-æœåŠ¡ï¼Œå¦‚ä½•ä¼ -ringsï¼Ÿ" aria-hidden="true" class="header-anchor">#</a> å…³äºè°ƒç”¨ SOE æœåŠ¡ï¼Œå¦‚ä½•ä¼  ringsï¼Ÿ</h2> <p>ç»˜åˆ¶å®Œæˆåï¼Œå¦‚æœè¦åŠ ç¼“å†²åŒºï¼Œå…ˆè°ƒç”¨è®¡ç®—ç¼“å†²åŒºçš„æœåŠ¡ï¼Œè®¡ç®—å‡ºæ ¹æ®ç»˜åˆ¶åçš„ geometry å’Œå½“å‰çš„ç¼“å†²èŒƒå›´ï¼Œå†é…ç½®å‚æ•°ä¼ ç»™ SOE</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æ ¸å¿ƒä»£ç </span>
<span class="token keyword">var</span> bufferParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> geometry <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_bufferGeometry<span class="token punctuation">;</span> <span class="token comment">// ç»˜åˆ¶çš„å‡ ä½•ä¿¡æ¯</span>
bufferParams<span class="token punctuation">.</span>distances <span class="token operator">=</span> <span class="token punctuation">[</span>bufferRange<span class="token punctuation">]</span><span class="token punctuation">;</span>
bufferParams<span class="token punctuation">.</span>outSpatialReference <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">.</span>spatialReference<span class="token punctuation">;</span>
bufferParams<span class="token punctuation">.</span>geometries <span class="token operator">=</span> <span class="token punctuation">[</span>geometry<span class="token punctuation">]</span><span class="token punctuation">;</span>
bufferParams<span class="token punctuation">.</span>unit <span class="token operator">=</span> GeometryService<span class="token punctuation">.</span><span class="token constant">UNIT_METER</span><span class="token punctuation">;</span>
<span class="token comment">// è®¡ç®—ç¼“å­˜åŒºï¼Œå¾—åˆ°å‡ ä½•ä¿¡æ¯</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>_geoService<span class="token punctuation">.</span><span class="token function">buffer</span><span class="token punctuation">(</span>
  bufferParams<span class="token punctuation">,</span>
  lang<span class="token punctuation">.</span><span class="token function">hitch</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>results<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> bufferGeometry <span class="token operator">=</span> results<span class="token punctuation">;</span>
      <span class="token comment">// å±•ç¤ºç¼“å†²åŒºåŸŸ</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_showBufferGeometry</span><span class="token punctuation">(</span>bufferGeometry<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>_bufferGeometry <span class="token operator">=</span> bufferGeometry<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="to-top"><svg t="1547627942927" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1955" xmlns:xlink="http://www.w3.org/1999/xlink" width="64" height="64" class="icon"><path d="M752.736 431.063C757.159 140.575 520.41 8.97 504.518 0.41V0l-0.45 0.205-0.41-0.205v0.41c-15.934 8.56-252.723 140.165-248.259 430.653-48.21 31.457-98.713 87.368-90.685 184.074 8.028 96.666 101.007 160.768 136.601 157.287 35.595-3.482 25.232-30.31 25.232-30.31l12.206-50.095s52.47 80.569 69.304 80.528c15.114-1.23 87-0.123 95.6 0h0.82c8.602-0.123 80.486-1.23 95.6 0 16.794 0 69.305-80.528 69.305-80.528l12.165 50.094s-10.322 26.83 25.272 30.31c35.595 3.482 128.574-60.62 136.602-157.286 8.028-96.665-42.475-152.617-90.685-184.074z m-248.669-4.26c-6.758-0.123-94.781-3.359-102.891-107.192 2.95-98.714 95.97-107.438 102.891-107.93 6.964 0.492 99.943 9.216 102.892 107.93-8.11 103.833-96.174 107.07-102.892 107.192z m-52.019 500.531c0 11.838-9.42 21.382-21.012 21.382a21.217 21.217 0 0 1-21.054-21.34V821.74c0-11.797 9.421-21.382 21.054-21.382 11.591 0 21.012 9.585 21.012 21.382v105.635z m77.333 57.222a21.504 21.504 0 0 1-21.34 21.626 21.504 21.504 0 0 1-21.34-21.626V827.474c0-11.96 9.543-21.668 21.299-21.668 11.796 0 21.38 9.708 21.38 21.668v157.082z m71.147-82.043c0 11.796-9.42 21.34-21.053 21.34a21.217 21.217 0 0 1-21.013-21.34v-75.367c0-11.755 9.421-21.299 21.013-21.299 11.632 0 21.053 9.544 21.053 21.3v75.366z" fill="#3eaf7c" p-id="1956"></path></svg></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/16/2019, 4:29:15 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/Notebook/assets/js/app.51035dcd.js" defer></script><script src="/Notebook/assets/js/21.b8066a1d.js" defer></script><script src="/Notebook/assets/js/11.bcd53a24.js" defer></script><script src="/Notebook/assets/js/19.17673ac2.js" defer></script>
  </body>
</html>
